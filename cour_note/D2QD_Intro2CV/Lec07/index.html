
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Isshiki修" name="author"/>
<link href="https://note.isshikih.top/cour_note/D2QD_Intro2CV/Lec07/" rel="canonical"/>
<link href="../Lec06/" rel="prev"/>
<link href="../Lec08/" rel="next"/>
<link href="../../../_assets/iro/IroPatch_Brown.ico" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.12" name="generator"/>
<title>Lecture 7 | Structure From Motion - Isshiki修's Notebook</title>
<link href="../../../assets/stylesheets/main.0d440cfe.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 96c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32zm85.1 80C367 158.8 384 129.4 384 96c0-53-43-96-96-96s-96 43-96 96c0 33.4 17 62.8 42.9 80H224c-17.7 0-32 14.3-32 32s14.3 32 32 32h32v208h-48c-53 0-96-43-96-96v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L97 263c-9.4-9.4-24.6-9.4-33.9 0L7 319c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 88.4 71.6 160 160 160h160c88.4 0 160-71.6 160-160v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-56-56c-9.4-9.4-24.6-9.4-33.9 0l-56 56c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 53-43 96-96 96H320V240h32c17.7 0 32-14.3 32-32s-14.3-32-32-32h-10.9z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m368.4 18.3-55.7 55.8 125.2 125.2 55.7-55.7c21.9-21.9 21.9-57.3 0-79.2l-46-46.1c-21.9-21.9-57.3-21.9-79.2 0zM288 94.6l-9.2 2.8-144.1 43.2c-19.9 6-35.7 21.2-42.3 41L3.8 445.8c-3.8 11.3-1 23.9 7.3 32.4l153.6-153.5c-3-6.3-4.7-13.3-4.7-20.7 0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48c-7.4 0-14.4-1.7-20.7-4.7L33.7 500.9c8.6 8.3 21.1 11.2 32.4 7.3l264.3-88.6c19.7-6.6 35-22.4 41-42.3l43.2-144.1 2.8-9.2L288 94.6z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zm-80 128c44.2 0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zm-80-336c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32 14.3 32 32 32 32-14.3 32-32z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c4.97 0 9 3.58 9 8s-6 10-9 10-9-5.58-9-10 4.03-8 9-8m-1.69 7.93C9.29 9.29 7.47 8.58 6.25 9.34c-1.22.76-1.38 2.71-.36 4.35 1.03 1.64 2.85 2.35 4.07 1.59 1.22-.78 1.37-2.71.35-4.35m3.38 0c-1.02 1.64-.87 3.57.35 4.35 1.22.76 3.04.05 4.07-1.59 1.02-1.64.86-3.59-.36-4.35-1.22-.76-3.04-.05-4.06 1.59M12 17.75c-2 0-2.5-.75-2.5-.75 0 .03.5 2 2.5 2s2.5-2 2.5-2-.5.75-2.5.75Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v11.5c0 49.9-60.3 74.9-95.6 39.6l-8.2-8.1C107.7 62.5 87.5 62.5 75 75s-12.5 32.8 0 45.3l8.2 8.2c35.2 35.2 10.2 95.5-39.7 95.5H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h11.5c49.9 0 74.9 60.3 39.6 95.6l-8.1 8.2c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l8.2-8.2c35.3-35.3 95.6-10.3 95.6 39.6V480c0 17.7 14.3 32 32 32s32-14.3 32-32v-11.5c0-49.9 60.3-74.9 95.6-39.6l8.2 8.2c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-8.2-8.2c-35.3-35.3-10.3-95.6 39.6-95.6H480c17.7 0 32-14.3 32-32s-14.3-32-32-32h-11.5c-49.9 0-74.9-60.3-39.6-95.6l8.2-8.2c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-8.2 8.2C348.3 118.4 288 93.4 288 43.5V32zm-16 192c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm32 104c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256c0-22.1-17.9-40-40-40s-40 17.9-40 40 17.9 40 40 40 40-17.9 40-40zm152 40c22.1 0 40-17.9 40-40s-17.9-40-40-40-40 17.9-40 40 17.9 40 40 40zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0h-32zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono"}</style>
<link href="../../../_css/extra.css" rel="stylesheet"/>
<link href="../../../_css/flink.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4P08GMSPJM"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4P08GMSPJM",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4P08GMSPJM",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="deep-orange" data-md-color-primary="brown" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#lecture-7--structure-from-motion">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="Isshiki修's Notebook" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Isshiki修's Notebook">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M.989 8 .064 2.68a1.342 1.342 0 0 1 1.85-1.462l13.402 5.744a1.13 1.13 0 0 1 0 2.076L1.913 14.782a1.343 1.343 0 0 1-1.85-1.463L.99 8Zm.603-5.288L2.38 7.25h4.87a.75.75 0 0 1 0 1.5H2.38l-.788 4.538L13.929 8Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Isshiki修's Notebook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Lecture 7 | Structure From Motion
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<a aria-label="分享" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="分享">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/IsshikiHugh/notebook" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    IsshikiHugh/notebook
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        💠 封面
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../tech_accu/">
        📚 技术积累
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../">
        🗒 课程笔记
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../research/">
        🥎 科研积累
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../pape_read/">
        📝 论文阅读
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../others/">
        📦 杂项专题
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../coming/">
        🚧 施工中...
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Isshiki修's Notebook" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Isshiki修's Notebook">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M.989 8 .064 2.68a1.342 1.342 0 0 1 1.85-1.462l13.402 5.744a1.13 1.13 0 0 1 0 2.076L1.913 14.782a1.343 1.343 0 0 1-1.85-1.463L.99 8Zm.603-5.288L2.38 7.25h4.87a.75.75 0 0 1 0 1.5H2.38l-.788 4.538L13.929 8Z"></path></svg>
</a>
    Isshiki修's Notebook
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/IsshikiHugh/notebook" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    IsshikiHugh/notebook
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../..">💠 封面</a>
<label for="__nav_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          💠 封面
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../link/">
        💬 交流
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/">📚 技术积累</a>
<label for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          📚 技术积累
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/tool/">常用工具</a>
<label for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          常用工具
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/tool/Shell/">
        Shell
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/tool/Git/">Git Something</a>
<label for="__nav_2_2_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_3">
<span class="md-nav__icon md-icon"></span>
          Git Something
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/tool/Git/Workflow/">
        Git Workflow
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/tool/Git/Commands/">
        Git Commands
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://sites.google.com/a/chromium.org/dev/developers/fast-intro-to-git-internals">
        🔗 A Fast Intro to Git Internals
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://mp.weixin.qq.com/s/fQFOGAv9cdvdZTpyL_9y8g">
        🔗 .git 目录里到底包含了什么？
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2_4" id="__nav_2_2_4_label" tabindex="0">
          MinIO
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_4">
<span class="md-nav__icon md-icon"></span>
          MinIO
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.minio.org.cn/">
        🔗 Website
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="http://docs.minio.org.cn/minio/baremetal/">
        🔗 Docs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://juejin.cn/post/7002026185391603749">
        🔗 Notes of MinIO x Golang
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2_5" id="__nav_2_2_5_label" tabindex="0">
          Docker
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_5">
<span class="md-nav__icon md-icon"></span>
          Docker
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://medium.com/geekculture/docker-build-with-mac-m1-d668c802ab96">
        🔗 Docker build with Mac M1
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
          makefile
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_6">
<span class="md-nav__icon md-icon"></span>
          makefile
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://opensource.com/article/18/8/what-how-makefile">
        🔗 What is a Makefile and how does it work?
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://seisman.github.io/how-to-write-makefile/introduction.html#">
        🔗 makefile 介绍
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/tool/Colab/">
        Google Colaboratory
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          编程语言
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          编程语言
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/language/cpp/">C++</a>
<label for="__nav_2_3_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_1">
<span class="md-nav__icon md-icon"></span>
          C++
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/language/cpp/Part0/">
        [pre] 前置与杂项
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/standard/">标准 | 格式 | 规范</a>
<label for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          标准 | 格式 | 规范
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/standard/BVH_format/">
        BVH 格式详解
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.yuque.com/isshikixiu/codes/gd5vxi">
        👉 OAuth
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">
        🔗 MIME
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/ai/">人工智能</a>
<label for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          人工智能
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech_accu/ai/pytorch/">
        PyTorch
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../tech_accu/ai/hydra/">Hydra</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_3">
<span class="md-nav__icon md-icon"></span>
          Hydra
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_4" id="__nav_2_5_4_label" tabindex="0">
          Pytorch Lighting
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_4">
<span class="md-nav__icon md-icon"></span>
          Pytorch Lighting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://lightning.ai/docs/pytorch/stable/">
        🔗 官方文档
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://medium.com/%E6%95%B8%E5%AD%B8-%E4%BA%BA%E5%B7%A5%E6%99%BA%E6%85%A7%E8%88%87%E8%9F%92%E8%9B%87/pytorch-lightning-%E5%85%A5%E5%9D%91%E5%BF%83%E5%BE%97-81af12de9bb7">
        🔗 PyTorch Lightning 入坑心得
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../">🗒 课程笔记</a>
<label for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          🗒 课程笔记
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1QD_CXiaoCheng/">
        🔮 C小程 琐碎知识点整理
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D1CX_ProbabilityAndStatistics/">💎 概率论与数理统计</a>
<label for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
          💎 概率论与数理统计
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap01/">
        [1.x] 概率论的基本概念
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap02/">
        [2.x] 随机变量及其概率分布
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap03/">
        [3.x] 多元随机变量及其分布
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap04/">
        [4.x] 随机变量的数字特征
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap05/">
        [5.x] 大数定律及中心极限定理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap06/">
        [6.x] 统计量与抽样分布
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap07/">
        [7.x] 参数估计
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1CX_ProbabilityAndStatistics/Chap08/">
        [8.x] 假设检验
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1SJ_StanfordCS231n/">
        🔮 Deep Learning for Computer Vision | CS231N
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D1SJ_Intro2CS/">
        🔮 计算机系统概论 | Introduction to Computing Systems
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D2QD_DigitalDesign/">💎 数字逻辑设计 | Digital Design</a>
<label for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
          💎 数字逻辑设计 | Digital Design
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap01/">
        Chap 1 Digital Systems and Information
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap02/">
        Chap 2 Combinational Logic Circuits
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap03/">
        Chap 3 Combinational Logic Design
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap04/">
        Chap 4 Sequential Circuits
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap05/">
        Chap 5 Digital Hardware Implementation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap06/">
        Chap 6 Registers &amp; Register Transfers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2QD_DigitalDesign/Chap07/">
        Chap 7 Memory Basics
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../">💎 计算机视觉导论 | I2CV</a>
<label for="__nav_3_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_7">
<span class="md-nav__icon md-icon"></span>
          💎 计算机视觉导论 | I2CV
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec01/">
        Lecture 1 | Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec02/">
        Lecture 2 | Image Formation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec03/">
        Lecture 3 | Image Processing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec04/">
        Lecture 4 | Model Fitting and Optimization
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec05/">
        Lecture 5 | Feature Matching and Motion Estimation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec06/">
        Lecture 6 | Image Alignment and Stitching
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Lecture 7 | Structure From Motion
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Lecture 7 | Structure From Motion
      </a>
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#相机标定与位置估计">
    相机标定与位置估计
  </a>
<nav aria-label="相机标定与位置估计" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#成像过程的建模">
    成像过程的建模
  </a>
<nav aria-label="成像过程的建模" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#世界坐标-to-相机坐标">
    世界坐标 to 相机坐标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#相机坐标-to-成像平面">
    相机坐标 to 成像平面
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#成像平面-to-传感器平面">
    成像平面 to 传感器平面
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#内参矩阵外参矩阵与投影矩阵">
    内参矩阵、外参矩阵与投影矩阵
  </a>
<nav aria-label="内参矩阵、外参矩阵与投影矩阵" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#内参矩阵">
    内参矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#外参矩阵">
    外参矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#投影矩阵">
    投影矩阵
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#相机标定与位置估计_1">
    相机标定与位置估计
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#多点透视成像问题">
    多点透视成像问题
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#双目三维重建">
    双目三维重建
  </a>
<nav aria-label="双目三维重建" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#对极几何">
    对极几何
  </a>
<nav aria-label="对极几何" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#极线约束">
    极线约束
  </a>
<nav aria-label="极线约束" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#本征矩阵">
    本征矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#基本矩阵">
    基本矩阵
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#三角测量">
    三角测量
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#具体步骤">
    具体步骤
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#多目三维重建">
    多目三维重建
  </a>
<nav aria-label="多目三维重建" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#集束优化">
    集束优化
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec08/">
        Lecture 8 | Depth Estimation &amp; 3D Reconstruction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec09/">
        Lecture 9 | Deep Learning
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec10/">
        Lecture 10 | Recognition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec11/">
        Lecture 11 | 3D Deep Learning
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec12/">
        Lecture 12 | Computational Photography 1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lec13/">
        Lecture 13 | Computational Photography 2
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2HJ_StanfordWriting/">
        🔮 科学文章写作 | Writing in the Sciences
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_9" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D2CX_ComputerOrganization/">🔮 计算机组成 | Computer Organization</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_9">
<span class="md-nav__icon md-icon"></span>
          🔮 计算机组成 | Computer Organization
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_10" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D2CX_AdvancedDataStructure/">💎 高级数据结构 | Advanced Data Structure</a>
<label for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
          💎 高级数据结构 | Advanced Data Structure
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec01/">
        Lecture 1 | AVL Trees &amp; Splay Trees
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec02/">
        Lecture 2 | Red Black Tree &amp; B+ Tree
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec03/">
        Lecture 3 | Inverted File Index
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec04/">
        Lecture 4 | Leftist Heap &amp; Skew Heap
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec05/">
        Lecture 5 | Binomial Queue
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec06/">
        Lecture 6 | Backtracing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec07/">
        Lecture 7 | Divide &amp; Conquer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec08/">
        Lecture 8 | Dynamic Programming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec09/">
        Lecture 9 | Greedy Algorithms
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec10/">
        Lecture 10 | NP Completeness
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec11/">
        Lecture 11 | Approximation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec12/">
        Lecture 12 | Local Search
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec13/">
        Lecture 13 | Randomized Algorithms
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec14/">
        Lecture 14 | Parallel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Lec15/">
        Lecture 15 | External Sorting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D2CX_AdvancedDataStructure/Ex01/">
        Topic 1 | Amortized Analysis
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D3QD_OperatingSystem/">💎 操作系统 | Operating System</a>
<label for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
          💎 操作系统 | Operating System
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit0/">
        Unit 0: 总览 | Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit1/">
        Unit 1: 进程管理 | Process Management
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11_4" id="__nav_3_11_4_label" tabindex="0">
          Unit 2 同步 | Synchronization
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_11_4">
<span class="md-nav__icon md-icon"></span>
          Unit 2 同步 | Synchronization
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit2-Part1/">
        U2 Part 1: 同步工具 | Synchronization Tools
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit2-Part2/">
        U2 Part 2: 同步问题例子 | Synchronization Problems Examples
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit2-Part3/">
        U2 Part 3: 死锁 | Deadlocks
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11_5" id="__nav_3_11_5_label" tabindex="0">
          Unit 3 内存 | Memory
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_11_5">
<span class="md-nav__icon md-icon"></span>
          Unit 3 内存 | Memory
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit3-Part1/">
        U3 Part 1: 内存设计 | Memory Design
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit3-Part2/">
        U3 Part 2: 内存管理 | Memory Management
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit4/">
        Unit 4: 输入/输出 | I/O
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit5/">
        Unit 5: 存储 | Storage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../D3QD_OperatingSystem/Unit6/">
        Unit 6: 文件系统 | File System
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_12" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../D3QD_ComputerNetwork/">🔮 计算机网络 | Computer Network</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_12_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_12">
<span class="md-nav__icon md-icon"></span>
          🔮 计算机网络 | Computer Network
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_13" id="__nav_3_13_label" tabindex="0">
          🔮 计算理论 | Theorem of Computing
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_13_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_13">
<span class="md-nav__icon md-icon"></span>
          🔮 计算理论 | Theorem of Computing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://note.tonycrane.cc/cs/tcs/toc/">
        🔗 xg 的 toc 笔记
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../research/">🥎 科研积累</a>
<label for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          🥎 科研积累
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../research/human_repr/">
        Body Models
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../research/talks/ECCV2024_Foundation_Models_for_3D_Humans/">Talks</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Talks
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../pape_read/">📝 论文阅读</a>
<label for="__nav_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          📝 论文阅读
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          资源
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
          资源
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://nn.labml.ai/">
        🔗 Annotated Deep Learning Paper Implementations
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/NeRF/">
        [NeRF] Representing Scenes as Neural Radiance Fields for View Synthesis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/ACTOR/">
        [ACTOR] Action-Conditioned 3D Human Motion Synthesis with Transformer VAE
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/NSM/">
        [NSM] Neural State Machine for Character-Scene Interactions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/SAMP/">
        [SAMP] Stochastic Scene-Aware Motion Prediction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/EG3D/">
        [EG3D] Efficient Geometry-aware 3D Generative Adversarial Networks
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/SA-MHR/">
        [SA-HMR] Learning Human Mesh Recovery in 3D Scenes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/TRACE/">
        [TRACE] 5D Temporal Regression of Avatars with Dynamic Cameras in 3D Environments
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/SMPLify/">
        [SMPLify] Keep It SMPL: Automatic Estimation of 3D Human Pose and Shape from a Single Image
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/SMPLX/">
        [SMPLX] Expressive Body Capture: 3D Hands, Face, and Body from a Single Image
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/HuMoR/">
        [HuMoR] 3D Human Motion Model for Robust Pose Estimation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/SLAHMR/">
        [SLAHMR] Decoupling Human and Camera Motion from Videos in the Wild
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/WHAM/">
        [WHAM] Reconstructing World-grounded Humans with Accurate 3D Motion
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../pape_read/ManipNet/">
        ManipNet: Neural Manipulation Synthesis with a Hand-Object Spatial Representation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../others/">📦 杂项专题</a>
<label for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          📦 杂项专题
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../others/tools/">
        工具收集
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../others/reveal-md2Slides/">
        使用 reveal-md 来写 Slides
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../others/summer_research_2024/">
        2024 暑研记录
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
          杂文收集
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_5">
<span class="md-nav__icon md-icon"></span>
          杂文收集
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://solarianprogrammer.com/2013/05/22/opengl-101-matrices-projection-view-model/">
        🔗 OpenGL 101: Matrices-projection/view/model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://zhuanlan.zhihu.com/p/35005794">
        🔗 全面解读 Group Normalization
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-load-obj.html">
        🔗 WebGL 加载 .obj 文件
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          🚧 施工中...
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          🚧 施工中...
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../coming/">
        内容正在编辑中……
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#相机标定与位置估计">
    相机标定与位置估计
  </a>
<nav aria-label="相机标定与位置估计" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#成像过程的建模">
    成像过程的建模
  </a>
<nav aria-label="成像过程的建模" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#世界坐标-to-相机坐标">
    世界坐标 to 相机坐标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#相机坐标-to-成像平面">
    相机坐标 to 成像平面
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#成像平面-to-传感器平面">
    成像平面 to 传感器平面
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#内参矩阵外参矩阵与投影矩阵">
    内参矩阵、外参矩阵与投影矩阵
  </a>
<nav aria-label="内参矩阵、外参矩阵与投影矩阵" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#内参矩阵">
    内参矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#外参矩阵">
    外参矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#投影矩阵">
    投影矩阵
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#相机标定与位置估计_1">
    相机标定与位置估计
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#多点透视成像问题">
    多点透视成像问题
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#双目三维重建">
    双目三维重建
  </a>
<nav aria-label="双目三维重建" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#对极几何">
    对极几何
  </a>
<nav aria-label="对极几何" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#极线约束">
    极线约束
  </a>
<nav aria-label="极线约束" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#本征矩阵">
    本征矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#基本矩阵">
    基本矩阵
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#三角测量">
    三角测量
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#具体步骤">
    具体步骤
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#多目三维重建">
    多目三维重建
  </a>
<nav aria-label="多目三维重建" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#集束优化">
    集束优化
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="lecture-7--structure-from-motion">Lecture 7 | Structure From Motion<a class="headerlink" href="#lecture-7--structure-from-motion" title="Permanent link">¶</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"></path></svg></span> 约 8658 个字 <span class="twemoji"><svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg></span> 14 行代码 <span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"></path></svg></span> 预计阅读时间 43 分钟</p>
</div>
<div class="admonition tip">
<p class="admonition-title">前言</p>
<p>个人感觉这一章的内容虽然脉络清晰，但是需要不断引入新的内容，如果直接采用“用到什么讲什么”的顺序阐述，可能会有些杂乱，不方便知识索引和复习，所以我大致按照拓扑排序的顺序排列内容，倾向于完整地介绍一下前置，再引入之后的内容并阶段性小结，可能看起来比较唐突，但是大概对回头查知识点比较方便。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">说明</p>
<p>本文中提到的所有的「成像平面」指的都是我们的简化几何模型中的虚拟成像平面，并不是物理意义上小孔成像所在的那个成反向倒立像的平面！</p>
</div>
<p><strong>运动推断结构(Structure from Motion, SfM)</strong>用于估计二维图像中的三维结构，通过相机运动（平移、旋转）引起的画面变化来计算其反应的 3D 结构。</p>
<blockquote>
<p>在机器人领域，一个相关的领域是 <a href="https://zh.wikipedia.org/wiki/%E5%90%8C%E6%97%B6%E5%AE%9A%E4%BD%8D%E4%B8%8E%E5%9C%B0%E5%9B%BE%E6%9E%84%E5%BB%BA">同时定位与地图构建(Simultaneous Localization and Mapping, SLAM)</a>。</p>
</blockquote>
<div class="admonition key-point">
<p class="admonition-title">三个关键问题</p>
<ol>
<li>如何描述相机的投影行为，也就是<strong><a href="../Lec02/#透视投影">相机模型</a></strong>的相关内容，本小结指透视模型；</li>
<li>如何通过图像求解相机参数，这个过程被称为<strong>相机标定(Camera Calibration)</strong>，以及如何求解相机的空间位置与朝向，这个过程被称为<strong>位置估计(Pose Estimation)</strong>；</li>
<li>如何利用若干视角进行重建；</li>
</ol>
<p>其中，第一个命题的内容已经在<strong><a href="../Lec02/">第二讲</a></strong>中涉及，所以不再展开。</p>
</div>
<hr/>
<h2 id="相机标定与位置估计">相机标定与位置估计<a class="headerlink" href="#相机标定与位置估计" title="Permanent link">¶</a></h2>
<p><strong>相机标定(Camera Calibration)</strong>即求解相机用来描述相机模型的自身参数，换句话来说就是求解相机的<strong>内参(Intrinsic Parameters)</strong>；而<strong>位置估计(Pose Estimation)</strong>求解相机的空间位置以及朝向，与内参相对应的，就是求解相机的<strong>外参(Extrinsic Parameters)</strong>。</p>
<hr/>
<h3 id="成像过程的建模">成像过程的建模<a class="headerlink" href="#成像过程的建模" title="Permanent link">¶</a></h3>
<div class="admonition info">
<p class="admonition-title">视觉定位问题</p>
<p>首先，为了展开之后的内容，我们需要定义<strong>视觉定位问题(Visual Localization Problem)</strong>：给定一个已知的三维模型，从某个位置对其进行拍摄，求解拍摄位置和视角。</p>
<p>而为了展开视觉定位问题，我们首先需要对相机成像这个过程进行一个数学建模——更详细的来说，是建模一个空间 3D 点与相机上特定像素区域的转化关系。</p>
</div>
<p>首先让我们回顾一下<strong><a href="../Lec02/#可视化表示">投影模型的可视化表示</a></strong>中的相关内容：</p>
<div class="admonition summary">
<p class="admonition-title">回顾</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/16.png"><img align="right" alt="" src="../img/16.png" width="50%"/></a></p>
<p>我们可以发现，小孔成像的模型视图其实还是比较麻烦的。现在我们把这个定角相似对折，变成 A 字型相似来表示这个模型，以简化不必要的信息，同时也能更清晰地表示透视关系。</p>
<p>规定我们讨论的问题中物距总是大于像距，则可以将像表示为相机中心到物体的放射连线中的<strong>截面</strong>。</p>
<p>它比较好地表达了透视关系，即 <u>相机中心</u> <u>物点B</u> <u>像点B'</u> 始终共线。这也是在之后的内容中更加常见的可视化表现方法。</p>
</div>
<p>它提供了一种将相机模型成像原理可视化的方法，接下来我们将它放到 3D 空间中：</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/81.png"><img alt="" src="../img/81.png"/></a></p>
<p>这张图大致描述了：在特定<strong>位置</strong>有着特定<strong>朝向</strong>的<strong>相机模型</strong>如何拍到已知 3D 景象的<strong>特定画面</strong>，但需要注意的是，这里的「Picture」代表的是 Image Plane，也就是成像平面，此时「坐标」的单位是长度，如毫米——与以「像素」为基本单元的“图片”有一定区别。</p>
<p>也就是说，从 3D 中的某一个点，到图片上的某块像素区域，有大致如下几个阶段：</p>
<pre class="mermaid"><code>graph LR
    A[3D 景象] --&gt; B[2D 成像平面] --&gt; C[像素图像];</code></pre>
<p>不过需要注意的一点是，我们在<strong><a href="../Lec02/#透视投影">相机模型</a></strong>中介绍的一系列建模，是建立在以相机为参考系的情况下的，而在<strong>视觉定位问题</strong>中，我们拥有的 3D 景象信息肯定不是通过<strong>相机坐标(Camera Coordinates)</strong>来表示的，而是用<strong>世界坐标(World Coordinates)</strong>，显然，这里只包括平移和旋转，也就是经过一次<strong><a href="../Lec01/#仿射变换与齐次坐标">仿射变换</a></strong>。</p>
<p>我们对上面那个流程图的结果进行一个改进：</p>
<pre class="mermaid"><code>graph LR
    A["(世界坐标) 3D 景象"] --&gt; B["(相机坐标) 3D 景象"] --&gt; C["(成像平面) 2D 映射"] --&gt; D["(传感器平面) 像素图像"];</code></pre>
<hr/>
<h4 id="世界坐标-to-相机坐标">世界坐标 to 相机坐标<a class="headerlink" href="#世界坐标-to-相机坐标" title="Permanent link">¶</a></h4>
<p>为了实现世界坐标向相机坐标的转换，我们需要知道相机坐标在世界坐标中的方向与位置，不难发现，实际上这就要求我们知道相机的外参。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/82.png"><img alt="" src="../img/82.png"/></a></p>
<p>更进一步的，实际上我们就是寻找一种变换，能够实现世界坐标系下的坐标向相机坐标系下坐标的转换：</p>
<div class="arithmatex">\[
\underbrace{\;\mathbf{x}_w = \begin{bmatrix}
    x_w \\
    y_w \\
    z_w
\end{bmatrix}\;}_{\text{World Coordinates}}
\xrightarrow{\text{Rotation \&amp; Movement}}
\underbrace{\;\mathbf{x}_c = \begin{bmatrix}
    x_c \\
    y_c \\
    z_c
\end{bmatrix}\;}_{\text{Camera Coordinates}}
\]</div>
<p>我们定义外参 <span class="arithmatex">\((R,\mathbf{c}_w)\)</span>，分别代表「从世界坐标向相机坐标的旋转矩阵」和「在世界坐标系下的相机的中心坐标」，则变换后的坐标即为：</p>
<div class="arithmatex">\[
\mathbf{x}_c = R(\mathbf{x}_w - \mathbf{c}_w) = R \mathbf{x}_w - R \mathbf{c}_w = R \mathbf{x}_w + \mathbf{t},\ \ \text{ where } \mathbf{t} = -R \mathbf{c}_w
\\ \text{i.e.} \;\;
\mathbf{x}_c = \begin{bmatrix} x_c \\ y_c \\ z_c \end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} \\
    r_{21} &amp; r_{22} &amp; r_{23} \\
    r_{31} &amp; r_{32} &amp; r_{33} \\
\end{bmatrix}
\begin{bmatrix}
    x_w \\ y_w \\ z_w
\end{bmatrix}
+
\begin{bmatrix}
    t_x \\ t_y \\ t_z
\end{bmatrix}
\]</div>
<blockquote>
<ul>
<li>说明：<ol>
<li><span class="arithmatex">\((\mathbf{x}_w - \mathbf{c}_w)\)</span> 可以理解为从相机中心指向目标点的一个向量；</li>
<li>旋转矩阵 <span class="arithmatex">\(R\)</span> 单位正交；
</li>
</ol>
</li>
</ul>
</blockquote>
<p>当然，我们可以将它使用齐次坐标统一：</p>
<div class="arithmatex">\[
\mathbf{\tilde x}_c = \begin{bmatrix} x_c \\ y_c \\ z_c \\ 1\end{bmatrix}
=
\underbrace{\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
    0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}}_{\text{Extrinsic Matrix}}
\begin{bmatrix}
    x_w \\ y_w \\ z_w \\ 1
\end{bmatrix}
\]</div>
<div class="admonition key-point">
<p class="admonition-title">外参矩阵</p>
<p>其中，新得到的这个 4<em>4 的矩阵就被称为</em><em>外参矩阵(Extrinsic Matrix)</em>*，也被写作：</p>
<div class="arithmatex">\[
M_{ext} =
\begin{bmatrix}
    R_{3\times 3} &amp; \mathbf{t} \\
    \mathbf{0}_{1\times 3} &amp; 1
\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
    0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\\ or \\
M_{ext} =
\begin{bmatrix}
    R_{3\times 3} &amp; \mathbf{t} \\
\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
\end{bmatrix}
\]</div>
</div>
<hr/>
<h4 id="相机坐标-to-成像平面">相机坐标 to 成像平面<a class="headerlink" href="#相机坐标-to-成像平面" title="Permanent link">¶</a></h4>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/83.png"><img align="right" alt="" src="../img/83.png" width="50%"/></a></p>
<p>实际上这一步就是我们在<strong><a href="../Lec02/#透视投影">相机模型</a></strong>介绍过的内容，我们在上一步已经做好了齐次坐标的铺垫，所以这一步格外简单。</p>
<div class="arithmatex">\[
\begin{bmatrix}
    \mathbf{x}_{i_{1 \times 2}} \\ 1
\end{bmatrix}
\cong
\begin{bmatrix}
    f &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; f &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0
\end{bmatrix}
\begin{bmatrix}
    x_c \\
    y_c \\
    z_c \\
    1
\end{bmatrix}
\]</div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>这里 3*4 的矩阵还不是内参矩阵！</p>
</div>
<hr/>
<h4 id="成像平面-to-传感器平面">成像平面 to 传感器平面<a class="headerlink" href="#成像平面-to-传感器平面" title="Permanent link">¶</a></h4>
<p>之前说过，成像平面上的内容和传感器平面上的内容最大的不同就是计量单位不同，所以我们需要将长度信息转化为像素信息；此外，中心坐标也需要变换。</p>
<p>假设 <span class="arithmatex">\(m_x\)</span> 和 <span class="arithmatex">\(m_y\)</span> 分别是单位长度上的像素密度（以 px/mm 为例），<span class="arithmatex">\((c_x,c_y)\)</span> 分别是在成像平面下传感器平面的中心坐标，则：</p>
<div class="arithmatex">\[
\left\{
    \begin{aligned}
        u &amp;= m_x \cdot x_i + c_x\\
        v &amp;= m_y \cdot y_i + c_y
    \end{aligned}
\right.
\]</div>
<p>带入上一节的结果，得到（注意，这里的“齐次坐标”是上一节带来的，这一节的计算并不需要齐次坐标）：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    u \\
    v \\
    1
\end{bmatrix}
=
...
\cong
\begin{bmatrix}
    u' \\
    v' \\
    z_c
\end{bmatrix}
=
\underbrace{{\begin{bmatrix}
    m_x f &amp; 0 &amp; c_x &amp; 0 \\
    0 &amp; m_y f &amp; c_y &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0
\end{bmatrix}}}_{\text{Intrinsic Matrix}}
\begin{bmatrix}
    x_c \\
    y_c \\
    z_c \\
    1
\end{bmatrix}
\]</div>
<div class="admonition key-point">
<p class="admonition-title">内参矩阵</p>
<p>这里得到的，包含 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(m\)</span> 的矩阵才是<strong>内参矩阵(Intrinsic Matrix)</strong>，也被写作：</p>
<div class="arithmatex">\[
M_{int} = 
\begin{bmatrix}
    m_x f &amp; 0 &amp; c_x &amp; 0 \\
    0 &amp; m_y f &amp; c_y &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0
\end{bmatrix}
\\
or
\\
K = 
\begin{bmatrix}
    m_x f &amp; 0 &amp; c_x \\
    0 &amp; m_y f &amp; c_y \\
    0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
</div>
<hr/>
<h3 id="内参矩阵外参矩阵与投影矩阵">内参矩阵、外参矩阵与投影矩阵<a class="headerlink" href="#内参矩阵外参矩阵与投影矩阵" title="Permanent link">¶</a></h3>
<p>简单总结上面几个步骤与内参外参矩阵的关系，就是下面这张流程图：</p>
<pre class="mermaid"><code>graph LR
    subgraph EM["Using Extrinsic Matrix"]
        A["Coordinate Transformation"]
    end
    subgraph IM["Using Intrinsic Matrix"]
        B["Perspective Projection"]
        C["Image Plane to Image Sensor Mapping"]
    end
    A ---&gt; B
    B ---&gt; C</code></pre>
<hr/>
<h4 id="内参矩阵">内参矩阵<a class="headerlink" href="#内参矩阵" title="Permanent link">¶</a></h4>
<p>我们在上面提到的内参矩阵长这样：</p>
<div class="arithmatex">\[
M_{int} = 
\begin{bmatrix}
    m_x f &amp; 0 &amp; c_x &amp; 0 \\
    0 &amp; m_y f &amp; c_y &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0
\end{bmatrix}
\\
or
\\
K = 
\begin{bmatrix}
    m_x f &amp; 0 &amp; c_x \\
    0 &amp; m_y f &amp; c_y \\
    0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
<p>其中主要有 4 个自由度：<span class="arithmatex">\(m_x f\)</span>、<span class="arithmatex">\(m_y f\)</span>、<span class="arithmatex">\(c_x\)</span>、<span class="arithmatex">\(c_y\)</span>。</p>
<p>然而实际上未必如此，由于畸变等可能存在的原因，实际的内参矩阵，或者是求解出来的内参矩阵并不一定形如此，我们在后面会提到，由于某些性质分解出来的内参矩阵，更多的是一个右上三角阵，即第一行第二列的元素未必为零。</p>
<hr/>
<h4 id="外参矩阵">外参矩阵<a class="headerlink" href="#外参矩阵" title="Permanent link">¶</a></h4>
<p>我们在上面提到的外参矩阵长这样：</p>
<div class="arithmatex">\[
M_{ext} =
\begin{bmatrix}
    R_{3\times 3} &amp; \mathbf{t} \\
    \mathbf{0}_{1\times 3} &amp; 1
\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
    0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\\ or \\
M_{ext} =
\begin{bmatrix}
    R_{3\times 3} &amp; \mathbf{t} \\
\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
\end{bmatrix}
\]</div>
<p>其中主要有 12 个自由度，包含了旋转矩阵 <span class="arithmatex">\(R\)</span> 和旋转后的位移向量 <span class="arithmatex">\(\mathbf{t}\)</span>。</p>
<p>类似于上一节提到的旋转矩阵，这里的旋转矩阵同样拥有 正交 和 <span class="arithmatex">\(||R||_2^2 = 1\)</span> 的性质。</p>
<hr/>
<h4 id="投影矩阵">投影矩阵<a class="headerlink" href="#投影矩阵" title="Permanent link">¶</a></h4>
<p>总结应用两个矩阵的两个阶段：</p>
<div class="admonition section">
<p class="admonition-title">Camera to Pixel: Intrinsic Matrix</p>
<div class="arithmatex">\[
\mathbf{\tilde{u}} = M_{int} \mathbf{\tilde{x}}_c \;\;\;\;i.e.\;\;\;\;
\begin{bmatrix}
    u' \\ v' \\ z_c
\end{bmatrix}
=
\begin{bmatrix}
    f_x &amp; 0 &amp; c_x &amp; 0 \\
    0 &amp; f_y &amp; c_y &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0
\end{bmatrix}
\begin{bmatrix}
    x_c \\
    y_c \\
    z_c \\
    1
\end{bmatrix}
\]</div>
</div>
<div class="admonition section">
<p class="admonition-title">World to Camera: Extrinsic Matrix</p>
<div class="arithmatex">\[
\mathbf{\tilde{x}}_c = M_{ext} \mathbf{\tilde{x}}_w \;\;\;\;i.e.\;\;\;\;
\begin{bmatrix} x_c \\ y_c \\ z_c \\ 1\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
    r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y\\
    r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z\\
    0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
    x_w \\ y_w \\ z_w \\ 1
\end{bmatrix}
\]</div>
</div>
<p>而将它们结合，我们就得到了完整的<strong>投影矩阵(Projection Matrix)</strong><span class="arithmatex">\(P\)</span>：</p>
<div class="arithmatex">\[
\mathbf{\tilde u} = M_{int}M_{ext} \mathbf{\tilde x}_w = P \mathbf{\tilde x} \;\;\;\; i.e. \;\;\;\;
\begin{bmatrix}
    u \\ v \\ 1
\end{bmatrix}
\cong
\begin{bmatrix}
    u' \\ v' \\ z_c
\end{bmatrix}
=
\underbrace{\begin{bmatrix}
    p_{11} &amp; p_{12} &amp; p_{13} &amp; p_{14} \\
    p_{21} &amp; p_{22} &amp; p_{23} &amp; p_{24} \\
    p_{31} &amp; p_{32} &amp; p_{33} &amp; p_{34}
\end{bmatrix}}_{\text{Projection Matrix } P}
\begin{bmatrix}
    x_w \\
    y_w \\
    z_w \\
    1
\end{bmatrix}
\]</div>
<hr/>
<h3 id="相机标定与位置估计_1">相机标定与位置估计<a class="headerlink" href="#相机标定与位置估计_1" title="Permanent link">¶</a></h3>
<p>根据<strong><a href="#投影矩阵">投影矩阵</a></strong>我们得到了像素点与 3D 景物世界坐标的转化关系，而相机标定与位置估计就是利用这个关系式求解投影矩阵。所以这就要求我们同时知道若干点的像素点位置和 3D 景物世界坐标，一般来说相机标定与位置估计是这么实现的：</p>
<div class="admonition section">
<p class="admonition-title">步骤一</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/84.jpeg"><img align="right" alt="" src="../img/84.jpeg" width="20%"/></a></p>
<p>给定一个几何特性已知的标定板，人为定义其世界坐标系。</p>
<hr/>
<p>由于坐标都是由我们人为给定的，所以我们可以按照尽可能方便的原则进行规划。此外，为了方便之后的计算，标定板的内容一般是简单明了的。</p>
<p>例如图中，定义世界坐标系后，每一格的边长为 5cm，所以紫色点的坐标为 <span class="arithmatex">\((0, 15, 20) cm\)</span>。</p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤二</p>
<p>寻找特定关键点的对应关系，也就是做<strong><a href="../Lec05/#图像特征匹配">特征匹配</a></strong>，即若干点对，每一个点对都是一个 3D 点和一个 2D 点的对应。</p>
<hr/>
<p>需要说明的一点是，我们已知的特征匹配是建立在两张二维图片上的，而现在要做的是 3D 到 2D 的匹配。一种想法是，我们可以将 3D 景象按照我们希望的方法映射为 2D 景象，例如在这个问题中我们可以直接拿这个标定板的 zy 平面来进行特征匹配。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/85.jpg"><img alt="" src="../img/85.jpg"/></a></p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤三</p>
<p>根据刚刚得到的若干对兴趣点，建立方程，求解投影矩阵。</p>
<hr/>
<p>每一对关键点可以分别根据 <span class="arithmatex">\(u\)</span> 和 <span class="arithmatex">\(v\)</span> 建立两个等式：</p>
<div class="arithmatex">\[
\underbrace{\begin{bmatrix}
    u^{(i)} \\
    v^{(i)} \\
    1
\end{bmatrix}}_{known}
= 
\underbrace{\begin{bmatrix}
    p_{11} &amp; p_{12} &amp; p_{13} &amp; p_{14} \\
    p_{21} &amp; p_{22} &amp; p_{23} &amp; p_{24} \\
    p_{31} &amp; p_{32} &amp; p_{33} &amp; p_{34}
\end{bmatrix}}_{unknown}
\underbrace{\begin{bmatrix}
    x_w^{(i)} \\
    y_w^{(i)} \\
    z_w^{(i)} \\
    1
\end{bmatrix}}_{known}
\\
i.e. \;\;\;\;
\left\{
\begin{aligned}
    u^{(i)} &amp;= \frac{p_{11}x_w^{(i)} + p_{12}y_w^{(i)} + p_{13}z_w^{(i)} + p_{14}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}} \\
    v^{(i)} &amp;= \frac{p_{21}x_w^{(i)} + p_{22}y_w^{(i)} + p_{23}z_w^{(i)} + p_{24}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}}
\end{aligned}
\right.
\]</div>
<p>由于投影矩阵有 12 个自由度，所以至少需要 6 对关键点 12 个等式。</p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤四</p>
<p>将若干方程重新排列为矩阵形式，方便之后的计算。</p>
<hr/>
<p>将步骤三得到的式子同分移项，形成 <span class="arithmatex">\(f(...) = 0\)</span> 的形式，再将 12 个式子结合在一起就得到了下面这个庞大的矩阵方程：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_w^{(1)} &amp; y_w^{(1)} &amp; z_w^{(1)} &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; -u_1x_w^{(1)} &amp; -u_1y_w^{(1)} &amp; -u_1z_w^{(1)} &amp; -u_1 \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp;  x_w^{(1)} &amp; y_w^{(1)} &amp; z_w^{(1)} &amp; 1 &amp; -v_1x_w^{(1)} &amp; -v_1y_w^{(1)} &amp; -v_1z_w^{(1)} &amp; -v_1 \\
    \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\ 
    x_w^{(i)} &amp; y_w^{(i)} &amp; z_w^{(i)} &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; -u_ix_w^{(i)} &amp; -u_iy_w^{(i)} &amp; -u_iz_w^{(i)} &amp; -u_i \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp;  x_w^{(i)} &amp; y_w^{(i)} &amp; z_w^{(i)} &amp; 1 &amp; -v_ix_w^{(i)} &amp; -v_iy_w^{(i)} &amp; -v_iz_w^{(i)} &amp; -v_i \\
    \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\ 
    x_w^{(n)} &amp; y_w^{(n)} &amp; z_w^{(n)} &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; -u_nx_w^{(n)} &amp; -u_ny_w^{(n)} &amp; -u_nz_w^{(n)} &amp; -u_n \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp;  x_w^{(n)} &amp; y_w^{(n)} &amp; z_w^{(n)} &amp; 1 &amp; -v_nx_w^{(n)} &amp; -v_ny_w^{(n)} &amp; -v_nz_w^{(n)} &amp; -v_n \\
\end{bmatrix}
\begin{bmatrix}
    p_{11} \\ p_{12} \\ p_{13} \\ p_{14} \\
    p_{21} \\ p_{22} \\ p_{23} \\ p_{24} \\
    p_{31} \\ p_{32} \\ p_{33} \\ p_{34}
\end{bmatrix}
=
\begin{bmatrix}
    0 \\ 0 \\ 0 \\ 0 \\
    0 \\ 0 \\ 0 \\ 0 \\
    0 \\ 0 \\ 0 \\ 0
\end{bmatrix}
\]</div>
<p>我们将其简写，也就是 <span class="arithmatex">\(A\mathbf{p} = 0\)</span>。</p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤五</p>
<p>求解 <span class="arithmatex">\(A\mathbf{p} = 0\)</span> 得到 <span class="arithmatex">\(\mathbf{p}\)</span>。</p>
<hr/>
<p>类似于上一节的操作，这里得到的 <span class="arithmatex">\(mathbf{p}\)</span> 也有多种可能，所以我们要对它进行约束，一般有两种选择：</p>
<ul>
<li>令 <span class="arithmatex">\(p_{34} = 1\)</span>；</li>
<li>令 <span class="arithmatex">\(||p|| = 1\)</span>；</li>
</ul>
<p>一般我们选择后者，也就是让 <span class="arithmatex">\(mathbf{p}\)</span> 的长度为 1，此时自由度削减为 11，仍然需要六对关键点。</p>
<p>接下来，我们将求解方程 <span class="arithmatex">\(A\mathbf{p} = 0\)</span> 转化为 <span class="arithmatex">\(\mathop{minimize} \limits_\mathbf{p} ||A\mathbf{p}||^2 \;\; \text{ such that } ||\mathbf{p}||^2 = 1\)</span> 的优化问题，由于和之前的一样，所以不再赘述。</p>
</div>
<div class="admonition note">
<p class="admonition-title">分解投影矩阵</p>
<p>根据<strong><a href="#投影矩阵">投影矩阵</a></strong>的相关内容我们知道：
<script type="math/tex; mode=display">
\begin{bmatrix}
    p_{11} \\ p_{12} \\ \vdots \\
    p_{33} \\ p_{34}
\end{bmatrix}
\rightarrow
P = 
\begin{bmatrix}
    p_{11} & p_{12} & p_{13} & p_{14} \\
    p_{21} & p_{22} & p_{23} & p_{24} \\
    p_{31} & p_{32} & p_{33} & p_{34}
\end{bmatrix}
=
\begin{bmatrix}
    f_x & 0 & c_x & 0 \\
    0 & f_y & c_y & 0 \\
    0 & 0 & 1 & 0
\end{bmatrix}
\begin{bmatrix}
    r_{11} & r_{12} & r_{13} & t_x \\
    r_{21} & r_{22} & r_{23} & t_y\\
    r_{31} & r_{32} & r_{33} & t_z\\
    0 & 0 & 0 & 1
\end{bmatrix}
</script>
</p>
<p>通常来说，将一个矩阵分解为两个特定矩阵是不现实的，但是此处的内参矩阵的子式具有“上三角阵”这个性质，外参矩阵中旋转矩阵子式具有“正交”这个性质，而且观察 0 的分布，我们发现 <span class="arithmatex">\([p_{11} \sim p_{33}]\)</span> 由 <span class="arithmatex">\(KR\)</span> 得到。所以我们恰好可以使用<strong><a href="https://zh.wikipedia.org/zh-hans/QR%E5%88%86%E8%A7%A3">QR 分解</a></strong>来实现：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    p_{11} &amp; p_{12} &amp; p_{13} \\
    p_{21} &amp; p_{22} &amp; p_{23} \\
    p_{31} &amp; p_{32} &amp; p_{33}
\end{bmatrix}
=
\begin{bmatrix}
    f_x &amp; 0 &amp; c_x \\
    0 &amp; f_y &amp; c_y \\
    0 &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} \\
    r_{21} &amp; r_{22} &amp; r_{23} \\
    r_{31} &amp; r_{32} &amp; r_{33} \\
\end{bmatrix}
= KR
\]</div>
<p>需要注意的是，使用 QR 分解得到的三角阵并不一定具有第一行第二列元素为 0 的性质。</p>
<p>此时，我们已经知道了除了 <span class="arithmatex">\(t_x,t_y,t_z\)</span> 以外的所有未知元了，所以当然可以回过来继续求它们。</p>
<div class="arithmatex">\[
\because
\begin{bmatrix}
    p_{14} \\ p_{24} \\ p_{34}
\end{bmatrix}
=
\begin{bmatrix}
    f_x &amp; 0 &amp; c_x \\
    0 &amp; f_y &amp; c_y \\
    0 &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
    t_x \\ t_y \\ t_z
\end{bmatrix}
= K \mathbf{t} \\
\therefore
\mathbf{t} = K^{-1} 
\begin{bmatrix}
    p_{14} \\ p_{24} \\ p_{34}
\end{bmatrix}
\]</div>
</div>
<hr/>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>需要特别注意的一点是，在我们上面涉及的讨论中，我们都没有考虑畸变带来的影响。</p>
</div>
<hr/>
<h3 id="多点透视成像问题">多点透视成像问题<a class="headerlink" href="#多点透视成像问题" title="Permanent link">¶</a></h3>
<p><strong>多点透视成像问题(Perspective-n-Point Problem)</strong>，即 PnP 问题，指的是已知内参求外参的视觉定位问题。</p>
<p>常见的解决方案有如下几种。</p>
<div class="admonition section">
<p class="admonition-title">DLT Direct Linear Transform</p>
<p>也就是上面提到的做法。</p>
</div>
<div class="admonition section">
<p class="admonition-title">P3P</p>
<p>至少需要 3 组对应关系才能求解相机位置，此外，我们还需要一个额外的点来保证答案的唯一性（否则一般来说会有四个解）</p>
<p>其主要思路是根据图像，使用余弦定律进行求解。</p>
<p><strong><a href="https://sakuratsuyu.github.io/Note/Computer_Science_Courses/ICV/7_Structure_from_Motion/#p3p">懒得写了，直接贴麦哥的笔记了！</a></strong></p>
</div>
<div class="admonition section">
<p class="admonition-title">PnP</p>
<p>n &gt; 3 的情况的做法。</p>
<p>转化为优化问题，求解理论和实际的点误差——<strong>重投影误差(reprojection error)</strong>最小时的外参，注意将齐次坐标转化为二维坐标。</p>
<p>Initialized by P3P, optimized by Gauss-Newton。</p>
<p><strong><a href="https://sakuratsuyu.github.io/Note/Computer_Science_Courses/ICV/7_Structure_from_Motion/#pnp">懒得写了，直接贴麦哥的笔记了！</a></strong></p>
</div>
<div class="admonition section">
<p class="admonition-title">EPnP</p>
<p>目前最受欢迎的做法，O(N) 十分高效也十分准确，大概是用四个控制点表示其他点。</p>
<p><strong><a href="https://sakuratsuyu.github.io/Note/Computer_Science_Courses/ICV/7_Structure_from_Motion/#epnp">懒得写了，直接贴麦哥的笔记了！</a></strong></p>
</div>
<hr/>
<div class="admonition info">
<p class="admonition-title">说明</p>
<p>本节接下来的内容，讲的是如何三维重建得到稀疏的点云，而如何得到稠密的三维重建，将成为下一节的重点。</p>
</div>
<hr/>
<h2 id="双目三维重建">双目三维重建<a class="headerlink" href="#双目三维重建" title="Permanent link">¶</a></h2>
<p><strong>双目视觉(Stereo Vision)</strong>：已知两个相机的内参，根据两张图像求解两个相机的外参和目标的 3D 结构。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/86.png"><img alt="" src="../img/86.png"/></a></p>
<hr/>
<h3 id="对极几何">对极几何<a class="headerlink" href="#对极几何" title="Permanent link">¶</a></h3>
<p>在<strong><a href="#相机标定与位置估计">前一节</a></strong>我们介绍了如何在「3D 景象模型已知」的情况下，对相机进行标定或进行未知估计，但我们仍然不知道如何从 2D 图片中重建出 3D 模型。</p>
<p>让我们考虑双目三维重建中的情形——两个相机下不同景象之间显然是存在一定的几何关系的，而<strong>对极几何(Epipolar Geometry)</strong>着眼于下面这三个目标之间的几何关系：两个相机中心 <span class="arithmatex">\(O_L\)</span> 和 <span class="arithmatex">\(O_R\)</span>，以及景物中的某个空间点 <span class="arithmatex">\(X\)</span>（或者 <span class="arithmatex">\(P\)</span>）。</p>
<div class="admonition quote">
<p class="admonition-title">Wiki page</p>
<p><a href="https://en.wikipedia.org/wiki/Epipolar_geometry">https://en.wikipedia.org/wiki/Epipolar_geometry</a></p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/89.png"><img align="right" alt="" src="../img/89.png"/></a></p>
<blockquote>
<p>Epipolar geometry is the geometry of stereo vision. When two cameras view a 3D scene from two distinct positions, there are a number of geometric relations between the 3D points and their projections onto the 2D images that lead to constraints between the image points. These relations are derived based on the assumption that the cameras can be approximated by the pinhole camera model.</p>
<p>对极几何是立体视觉的几何学。当两个摄像机从两个不同的位置查看 3D 场景时，3D 点与它们在 2D 图像上的投影之间存在许多几何关系，导致图像点之间存在约束。这些关系是基于相机可以用针孔相机模型近似的假设导出的。</p>
<p>——Wiki</p>
</blockquote>
</div>
<p>首先，我们需要介绍对极几何中的几个概念，我们将借助上图进行说明。</p>
<div class="admonition definition">
<p class="admonition-title">基线</p>
<p><strong>基线(Baseline)</strong>是两个相机中心的连线，即 <span class="arithmatex">\(OO'\)</span>。</p>
</div>
<div class="admonition definition">
<p class="admonition-title">对极点</p>
<p><strong>对极点(Epipole)</strong>指的是：其中一个相机的<strong>相机中心</strong>在 另外一个相机的<strong>成像平面上</strong>的投影点，即 <span class="arithmatex">\(e_l\)</span> 和 <span class="arithmatex">\(e_r\)</span>，且他们在既定的具体双目模型下是唯一的。</p>
</div>
<div class="admonition definition">
<p class="admonition-title">对极面</p>
<p><strong>对极面(Epipolar Plane)</strong>指的是两个相机中心 <span class="arithmatex">\(O_L\)</span> 和 <span class="arithmatex">\(O_R\)</span>，以及景物中的某个空间点 <span class="arithmatex">\(X\)</span> 这三个点所确定的空间平面。</p>
<p>其中有一个性质，对极面总是经过相机中心连线 <span class="arithmatex">\(O_L O_R\)</span>，所以对于某个景物中的点 <span class="arithmatex">\(X_i\)</span>，其对极面都是唯一的。（显然，反过来不成立。）</p>
</div>
<div class="admonition definition">
<p class="admonition-title">对极线</p>
<p><strong>对极线(Epipolar Line)</strong>是关于动点 <span class="arithmatex">\(X\)</span> 来说的，体现为对极面与成像平面的交线。</p>
<p>假设我们只知道 <span class="arithmatex">\(X_L\)</span> 而不知道 <span class="arithmatex">\(X_R\)</span>，那么 <span class="arithmatex">\(X\)</span> 可能在 <span class="arithmatex">\(O_L X_L\)</span> 这条线上的任一点；而这条线在 <span class="arithmatex">\(R\)</span> 平面上的投影就是一条对极线，它的含义是可能的 <span class="arithmatex">\(X_R\)</span> 的轨迹。</p>
<p>此外，对极线有一个性质：对极线必定经过对极点，而经过对极点的任意一条直线（当然得在成像平面上）都可以是对极线。</p>
<p>👉 <a href="https://en.wikipedia.org/wiki/Epipolar_geometry#Epipolar_line">Wiki</a>。</p>
</div>
<div class="admonition summary">
<p class="admonition-title">其他说明</p>
<p>图中还需要额外解释的就是 <span class="arithmatex">\(X_L\)</span> 和 <span class="arithmatex">\(X_R\)</span>，它们分别是景物中的某个空间点 <span class="arithmatex">\(X\)</span> 在两个成像平面上的像。</p>
</div>
<hr/>
<h4 id="极线约束">极线约束<a class="headerlink" href="#极线约束" title="Permanent link">¶</a></h4>
<p>现在我们关注对极面，着眼于解决下面这样一个问题。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/90.png"><img alt="" src="../img/90.png"/></a></p>
<p>其中两侧的相机理所当然的都拥有自己的坐标系，现在我们寻找一种变换，使得：<span class="arithmatex">\(\mathbf{x}_l = R\mathbf{x}_r + \mathbf{t}\)</span>，其中 <span class="arithmatex">\(\mathbf{t} = \overrightarrow{O_r O_l}\)</span>（图中貌似标错了方向），<span class="arithmatex">\(\mathbf{x}_l = \overrightarrow{O_l P}\)</span> 而 <span class="arithmatex">\(\mathbf{x}_r = \overrightarrow{O_r P}\)</span> 。</p>
<p>下面开始 <del>变魔法</del> 进行一些变化：</p>
<details class="section" open="open">
<summary>形式 ② 推理过程</summary>
<p>首先，在同一个（任何一个）笛卡尔坐标系中，都有 <span class="arithmatex">\(\mathbf{x}_l \cdot (\mathbf{t} \times \mathbf{x}_l) = 0\)</span>。</p>
<p>具体来说，<span class="arithmatex">\(\mathbf{t}\)</span> 和 <span class="arithmatex">\(\mathbf{x}_l\)</span> 都是对极面内的两个不平行（我们假定这一点恒成立）的向量，那么 <span class="arithmatex">\(\mathbf{t} \times \mathbf{x}_l\)</span> 的结果必然是一个垂直于对极面的向量。而这个向量必然垂直于对极面上任意一个向量，所以上式结果为 <span class="arithmatex">\(0\)</span>。而将这个式子写成矩阵向量运算的形式，就是：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\left(
\begin{bmatrix}
    0    &amp; -t_z &amp; t_y  \\
    t_z  &amp; 0    &amp; -t_x \\
    -t_y &amp; t_x  &amp; 0
\end{bmatrix}
\begin{bmatrix}
    x_l \\
    y_l \\
    z_l
\end{bmatrix}
\right)
= 0
\;\;\;\;\;\left( 1 \right)
\]</div>
<hr/>
<p>类似的，我们将 <span class="arithmatex">\(\mathbf{x}_l = R\mathbf{x}_r + \mathbf{t}\)</span> 也写成矩阵和向量运算的形式：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l \\
    y_l \\
    z_l        
\end{bmatrix}
=
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} \\
    r_{21} &amp; r_{22} &amp; r_{23} \\
    r_{31} &amp; r_{32} &amp; r_{33}
\end{bmatrix}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
+
\begin{bmatrix}
    t_x \\
    t_y \\
    t_z
\end{bmatrix}
\;\;\;\;\;\left( 2 \right)
\]</div>
<hr/>
<p>我们将 <span class="arithmatex">\((2)\)</span> 式带入 <span class="arithmatex">\((1)\)</span> 式，得到：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\begin{bmatrix}
    0    &amp; -t_z &amp; t_y  \\
    t_z  &amp; 0    &amp; -t_x \\
    -t_y &amp; t_x  &amp; 0
\end{bmatrix}
\left(
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} \\
    r_{21} &amp; r_{22} &amp; r_{23} \\
    r_{31} &amp; r_{32} &amp; r_{33}
\end{bmatrix}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
+
\begin{bmatrix}
    t_x \\
    t_y \\
    t_z
\end{bmatrix}    
\right)
= 0
\]</div>
<p>稍作变化（把含 <span class="arithmatex">\(t\)</span> 的方阵拿到括号里面）：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\left(
\begin{bmatrix}
    0    &amp; -t_z &amp; t_y  \\
    t_z  &amp; 0    &amp; -t_x \\
    -t_y &amp; t_x  &amp; 0
\end{bmatrix}
\begin{bmatrix}
    r_{11} &amp; r_{12} &amp; r_{13} \\
    r_{21} &amp; r_{22} &amp; r_{23} \\
    r_{31} &amp; r_{32} &amp; r_{33}
\end{bmatrix}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
+
\underbrace{
    \begin{bmatrix}
        0    &amp; -t_z &amp; t_y  \\
        t_z  &amp; 0    &amp; -t_x \\
        -t_y &amp; t_x  &amp; 0
    \end{bmatrix}
    \begin{bmatrix}
        t_x \\
        t_y \\
        t_z
    \end{bmatrix}
}_{\mathbf{t} \times \mathbf{t} = 0}
\right)
= 0
\]</div>
<p>我们开心的发现里面出来了一个 <span class="arithmatex">\(0\)</span>，把它摘掉以后就变成了：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\underbrace{
    \begin{bmatrix}
        0    &amp; -t_z &amp; t_y  \\
        t_z  &amp; 0    &amp; -t_x \\
        -t_y &amp; t_x  &amp; 0
    \end{bmatrix}
    \begin{bmatrix}
        r_{11} &amp; r_{12} &amp; r_{13} \\
        r_{21} &amp; r_{22} &amp; r_{23} \\
        r_{31} &amp; r_{32} &amp; r_{33}
    \end{bmatrix}
}_{\text{Essential Matrix E}}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
= 0
\]</div>
<h5 id="本征矩阵">本征矩阵<a class="headerlink" href="#本征矩阵" title="Permanent link">¶</a></h5>
<p>更进一步化简，我们可以把中间两个矩阵合起来，得到<strong>本征矩阵(Essential Matrix)</strong><span class="arithmatex">\(E\)</span>：</p>
<div class="arithmatex">\[
E=T_{\times}R=
\begin{bmatrix}
    e_{11} &amp; e_{12} &amp; e_{13} \\
    e_{21} &amp; e_{22} &amp; e_{23} \\
    e_{31} &amp; e_{32} &amp; e_{33}
\end{bmatrix}
\]</div>
<p>于是我们就得到：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\begin{bmatrix}
    e_{11} &amp; e_{12} &amp; e_{13} \\
    e_{21} &amp; e_{22} &amp; e_{23} \\
    e_{31} &amp; e_{32} &amp; e_{33}
\end{bmatrix}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
= 0
\;\;\;\text{i.e.} \;\;\;
\mathbf{x}_l^T E \mathbf{x}_r = 0
\]</div>
<div class="admonition key-point">
<p class="admonition-title">本征矩阵的性质</p>
<p>由于 Essential Matrix 的定义具有如下特征：</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/91.png"><img alt="" src="../img/91.png"/></a></p>
<blockquote>
<p><span class="arithmatex">\(T_{\times}\)</span> 反对称(Skew-Symmetric)，<span class="arithmatex">\(R\)</span> 正交(Orthonormal)。</p>
</blockquote>
<p>所以我们可以使用<strong>奇异值分解(Singular Value Decomposition)</strong>或者说 SV 分解来去耦合。</p>
</div>
</details>
<p>也就是说，我们将求解这个问题：</p>
<blockquote>
<p>形式 ①：寻找一种变换，使得：<span class="arithmatex">\(\mathbf{x}_l = R\mathbf{x}_r + \mathbf{t}\)</span>，其中 <span class="arithmatex">\(\mathbf{t} = \overrightarrow{O_r O_l}\)</span>；</p>
</blockquote>
<p>利用对极几何的相关内容，转换为了：</p>
<blockquote>
<p>形式 ②：求解 <span class="arithmatex">\(E\)</span> 使得 <span class="arithmatex">\(\mathbf{x}_l^T E \mathbf{x}_r = 0\)</span>，其中 <span class="arithmatex">\(E = T_{\times}R\)</span>，其中 <span class="arithmatex">\(T\)</span> 是 <span class="arithmatex">\(\mathbf{t}\)</span> 的矩阵形式；</p>
</blockquote>
<p>然而我们并不知道 <span class="arithmatex">\(\mathbf{x}_l\)</span> 和 <span class="arithmatex">\(\mathbf{x}_r\)</span>，所以还需要进一步变化。</p>
<details class="section" open="open">
<summary>形式 ③ 推理过程</summary>
<p>根据<strong><a href="../Lec02/#透视投影">透视投影</a></strong>的相关内容，我们可以得到：</p>
<div class="arithmatex">\[
\small
\begin{aligned}
    \text{Left Camera} &amp;&amp; \text{Right Camera}
    \\
    z_l 
    \begin{bmatrix}
    u_l \\ v_l \\ 1
    \end{bmatrix}
    &amp; =
    \underbrace{
    \begin{bmatrix}
    f_x^{(l)} &amp; 0 &amp; o_x^{(l)} \\
    0 &amp; f_y^{(l)} &amp; o_y^{(l)} \\
    0 &amp; 0 &amp; 1
    \end{bmatrix}
    }_{K_l}
    \begin{bmatrix}
    x_l \\ y_l \\ z_l
    \end{bmatrix}
    &amp;
    z_r 
    \begin{bmatrix}
    u_r \\ v_r \\ 1
    \end{bmatrix}
    &amp;=
    \underbrace{
    \begin{bmatrix}
    f_x^{(r)} &amp; 0 &amp; o_x^{(r)} \\
    0 &amp; f_y^{(r)} &amp; o_y^{(r)} \\
    0 &amp; 0 &amp; 1
    \end{bmatrix}
    }_{K_r}
    \begin{bmatrix}
    x_r \\ y_r \\ z_r
    \end{bmatrix}
    \\
    \mathbf{x}_l^T &amp;=
    \begin{bmatrix}
    u_l &amp; v_l &amp; 1
    \end{bmatrix}
    z_l (K_l^{-1})^T
    &amp; \mathbf{x}_r &amp;= 
    K_r^{-1} z_r
    \begin{bmatrix}
    u_r \\ v_r \\ 1
    \end{bmatrix}
\end{aligned}
\]</div>
<hr/>
<p>将上式带入到形式 ② 得到：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    x_l &amp; y_l &amp; z_l
\end{bmatrix}
\begin{bmatrix}
    e_{11} &amp; e_{12} &amp; e_{13} \\
    e_{21} &amp; e_{22} &amp; e_{23} \\
    e_{31} &amp; e_{32} &amp; e_{33}
\end{bmatrix}
\begin{bmatrix}
    x_r \\
    y_r \\
    z_r
\end{bmatrix}
= 0
\]</div>
<p>就变成了：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    u_l &amp; v_l &amp; 1
\end{bmatrix}
z_l (K_l^{-1})^T
\begin{bmatrix}
    e_{11} &amp; e_{12} &amp; e_{13} \\
    e_{21} &amp; e_{22} &amp; e_{23} \\
    e_{31} &amp; e_{32} &amp; e_{33}
\end{bmatrix}
K_r^{-1} z_r
\begin{bmatrix}
    u_r \\ v_r \\ 1
\end{bmatrix}
= 0
\]</div>
<h5 id="基本矩阵">基本矩阵<a class="headerlink" href="#基本矩阵" title="Permanent link">¶</a></h5>
<p>我们可以将常数 <span class="arithmatex">\(z_l\)</span> 和 <span class="arithmatex">\(z_r\)</span> 约掉，并且合并中间的三个矩阵，得到：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    u_l &amp; v_l &amp; 1
\end{bmatrix}
\underbrace{
    (K_l^{-1})^T
    \begin{bmatrix}
        e_{11} &amp; e_{12} &amp; e_{13} \\
        e_{21} &amp; e_{22} &amp; e_{23} \\
        e_{31} &amp; e_{32} &amp; e_{33}
    \end{bmatrix}
    K_r^{-1}
}_{\text{Fundamental Matrix F}}
\begin{bmatrix}
    u_r \\ v_r \\ 1
\end{bmatrix}
= 0
\]</div>
<p>于是得到了<strong>基本矩阵(Fundamental Matrix)</strong><span class="arithmatex">\(F\)</span>：</p>
<div class="arithmatex">\[
F = (K_l^{-1})^T E K_r^{-1} 
  = (K_l^{-1})^T 
    \begin{bmatrix}
        e_{11} &amp; e_{12} &amp; e_{13} \\
        e_{21} &amp; e_{22} &amp; e_{23} \\
        e_{31} &amp; e_{32} &amp; e_{33}
    \end{bmatrix}
    K_r^{-1}
  = \begin{bmatrix}
        f_{11} &amp; f_{12} &amp; f_{13} \\
        f_{21} &amp; f_{22} &amp; f_{23} \\
        f_{31} &amp; f_{32} &amp; f_{33}
    \end{bmatrix}
\]</div>
<p>这就是我们的形式 ③。</p>
</details>
<p>这时，我们发现，<span class="arithmatex">\(\mathbf{u}_l\)</span> 和 <span class="arithmatex">\(\mathbf{u}_r\)</span> 终于是我们已知的东西了，这下我们可以求解基本矩阵 <span class="arithmatex">\(F\)</span>，而由于两个相机的内参矩阵也是已知的，所以我们还可以倒过来接着得到本征矩阵 <span class="arithmatex">\(E\)</span>，最后通过 SV 分解得到我们想要的 <span class="arithmatex">\(R\)</span> 和 <span class="arithmatex">\(\mathbf{t}\)</span>。</p>
<p>具体来说，求解基本矩阵、本征矩阵、坐标变换的步骤如下：</p>
<details class="section" open="open">
<summary>求解步骤</summary>
<p>对于关键点 <span class="arithmatex">\(i\)</span>，我们需要求解：</p>
<div class="arithmatex">\[
\begin{bmatrix}
    u_l^{(i)} &amp; v_l^{(i)} &amp; 1
\end{bmatrix}
\begin{bmatrix}
    f_{11} &amp; f_{12} &amp; f_{13} \\
    f_{21} &amp; f_{22} &amp; f_{23} \\
    f_{31} &amp; f_{32} &amp; f_{33}
\end{bmatrix}
\begin{bmatrix}
    u_r^{(i)} \\ v_r^{(i)} \\ 1
\end{bmatrix}
= 0
\]</div>
<p>将其展开：</p>
<div class="arithmatex">\[
\left( f_{11} u_r^{(i)} + f_{12} v_r^{(i)} + f_13 \right) u_l^{(i)} +
\left( f_{21} u_r^{(i)} + f_{22} v_r^{(i)} + f_23 \right) v_l^{(i)} +
f_{31} u_r^{(i)} + f_{32} v_r^{(i)} + f_33 = 0.
\]</div>
<hr/>
<p>接下来将所有的 <span class="arithmatex">\(m\)</span> 组方程合再同一个矩阵里（我们至少需要额外的 8 个方程，之后会说）：</p>
<div class="arithmatex">\[
\underbrace{
    \begin{bmatrix}
        u_l^{(1)}u_r^{(1)} &amp; u_l^{(1)}v_r^{(1)} &amp; u_l^{(1)} &amp; v_l^{(1)}u_r^{(1)} &amp; v_l^{(1)}v_r^{(1)} &amp; v_l^{(1)} &amp; u_r^{(1)} &amp; v_r^{(1)} &amp; 1 \\
        \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\ 
        u_l^{(i)}u_r^{(i)} &amp; u_l^{(i)}v_r^{(i)} &amp; u_l^{(i)} &amp; v_l^{(i)}u_r^{(i)} &amp; v_l^{(i)}v_r^{(i)} &amp; v_l^{(i)} &amp; u_r^{(i)} &amp; v_r^{(i)} &amp; 1 \\
        \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\ 
        u_l^{(m)}u_r^{(m)} &amp; u_l^{(m)}v_r^{(m)} &amp; u_l^{(m)} &amp; v_l^{(m)}u_r^{(m)} &amp; v_l^{(m)}v_r^{(m)} &amp; v_l^{(m)} &amp; u_r^{(m)} &amp; v_r^{(m)} &amp; 1 \\
    \end{bmatrix}
}_{A: \text{ Known }}
\underbrace{
    \begin{bmatrix}
        f_{11} \\ f_{12} \\ f_{13} \\
        f_{21} \\ f_{22} \\ f_{23} \\
        f_{31} \\ f_{32} \\ f_{33} \\
    \end{bmatrix}
}_{\mathbf{f}: \text{ Unknown }}
=
\begin{bmatrix}
    0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0
\end{bmatrix}
\\
\text{i.e.} \;\;\;\; A\mathbf{f}=0
\]</div>
<p>当然，像之前一样，由于这个方程可以解出 <span class="arithmatex">\(k\mathbf{f}, \forall k\in \text{Z}\)</span>，所以我们需要给 <span class="arithmatex">\(\mathbf{f}\)</span> 一个约束，在这里我们取 <span class="arithmatex">\(||\mathbf{f}||^2 = 1\)</span>，于是问题就又变成了：</p>
<div class="arithmatex">\[
\mathop{minimize} \limits_{\mathbf{f}} ||A\mathbf{f}||^2 \text{ such that } ||\mathbf{f}||^2 = 1
\]</div>
<blockquote>
<p>为了求解 <span class="arithmatex">\(F\)</span> 中的 9 个未知数，我们已经有一个确定的约束方程是 <span class="arithmatex">\(||\mathbf{f}||^2 = 1\)</span>，所以还需要额外 8 个方程。</p>
</blockquote>
<hr/>
<p>求解得到 <span class="arithmatex">\(F\)</span> 以后，根据 <span class="arithmatex">\(E = K_l^T F K_r\)</span> 得到 <span class="arithmatex">\(E\)</span>。</p>
<hr/>
<p>前面也已经说过，对 <span class="arithmatex">\(E\)</span> 进行 SV 分解就可以得到 <span class="arithmatex">\(R\)</span> 和 <span class="arithmatex">\(T_{\times}\)</span>，对 <span class="arithmatex">\(T_{\times}\)</span> 重排列就得到了 <span class="arithmatex">\(\mathbf{t}\)</span>。</p>
</details>
<hr/>
<h4 id="三角测量">三角测量<a class="headerlink" href="#三角测量" title="Permanent link">¶</a></h4>
<p>我们知道，如果假设数据都是准确的，那么 <span class="arithmatex">\(O_l X_l\)</span> 和 <span class="arithmatex">\(O_r X_r\)</span> 应当相交于空间点 <span class="arithmatex">\(X\)</span>。而三角测量描述的就是如何通过这样一个过程得到空间点 <span class="arithmatex">\(X\)</span>。</p>
<p>我们在 <a href="#极线约束">极线约束</a> 里已经知道了 <span class="arithmatex">\(\mathbf{x}_l\)</span> 和 <span class="arithmatex">\(\mathbf{x}_r\)</span> 的变换关系，也就是说我们现在已经有了 <span class="arithmatex">\(O_l X_l\)</span> 和 <span class="arithmatex">\(O_r X_r\)</span> 的方程了。那么应当能够解出这个 <span class="arithmatex">\(X\)</span>，不过由于实际数据有误差，所以我们可能只能通过优化的方法得到近似解。</p>
<p>具体的推理步骤如下：</p>
<details class="section" open="open">
<summary>求解步骤</summary>
<p>首先我们使用齐次坐标改写变换方程，并最终写成关于 <span class="arithmatex">\(\mathbf{u}\)</span> 的形式 
<script type="math/tex; mode=display">
\begin{aligned}
    \text{Left Camera}
    \\
    \because
    \begin{bmatrix}
        u_l \\ v_l \\ 1
    \end{bmatrix}
    &=
    \begin{bmatrix}
        f_x^{(l)} & 0 & o_x^{(l)} & 0 \\
        0 & f_y^{(l)} & o_y^{(l)} & 0 \\
        0 & 0 & 1 & 0
    \end{bmatrix}
    \begin{bmatrix}
        x_l \\ y_l \\ z_l \\ 1
    \end{bmatrix}
    ,\ \ 
    \begin{bmatrix}
        x_l \\ y_l \\ z_l \\ 1
    \end{bmatrix}
    =
    \begin{bmatrix}
        r_{11} & r_{12} & r_{13} & t_x \\
        r_{21} & r_{22} & r_{23} & t_y \\
        r_{31} & r_{32} & r_{33} & t_z \\
        0 & 0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
        x_r \\ y_r \\ z_r \\ 1
    \end{bmatrix}
    \\
    \therefore
    \begin{bmatrix}
        u_l \\ v_l \\ 1
    \end{bmatrix}
    &=
    \begin{bmatrix}
        f_x^{(l)} & 0 & o_x^{(l)} & 0 \\
        0 & f_y^{(l)} & o_y^{(l)} & 0 \\
        0 & 0 & 1 & 0
    \end{bmatrix}
    \begin{bmatrix}
        r_{11} & r_{12} & r_{13} & t_x \\
        r_{21} & r_{22} & r_{23} & t_y \\
        r_{31} & r_{32} & r_{33} & t_z \\
        0 & 0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
        x_r \\ y_r \\ z_r \\ 1
    \end{bmatrix}
    \\
    \text{i.e. } \mathbf{\tilde u}_l &= 
    P_l \mathbf{\tilde x}_r
    \\
    \text{Right Camera}
    \\
    \begin{bmatrix}
        u_r \\ v_r \\ 1
    \end{bmatrix}
    &=
    \begin{bmatrix}
        f_x^{(r)} & 0 & o_x^{(r)} & 0 \\
        0 & f_y^{(r)} & o_y^{(r)} & 0 \\
        0 & 0 & 1 & 0
    \end{bmatrix}
    \begin{bmatrix}
        x_r \\ y_r \\ z_r \\ 1
    \end{bmatrix}
    \\
    \text{i.e. } \mathbf{\tilde u}_r &= 
    M_{int_r} \mathbf{\tilde x}_r
\end{aligned}
</script>
</p>
<p>稍作总结，就是得到了下面这两个关系：</p>
<div class="arithmatex">\[
\mathbf{\tilde u}_l = P_l \mathbf{\tilde x}_r
\\
\begin{bmatrix}
    u_r \\ v_r \\ 1
\end{bmatrix}
=
\begin{bmatrix}
    m_{11} &amp; m_{12} &amp; m_{13} &amp; m_{14} \\
    m_{21} &amp; m_{22} &amp; m_{23} &amp; m_{24} \\
    m_{31} &amp; m_{32} &amp; m_{33} &amp; m_{34} \\
\end{bmatrix}
\begin{bmatrix}
    x_r \\ y_r \\ z_r \\ 1
\end{bmatrix}
\\ \\
\mathbf{\tilde u}_l = M_{int_r} \mathbf{\tilde x}_r
\\
\begin{bmatrix}
u_l \\ v_l \\ 1
\end{bmatrix}
=
\begin{bmatrix}
p_{11} &amp; p_{12} &amp; p_{13} &amp; p_{14} \\
p_{21} &amp; p_{22} &amp; p_{23} &amp; p_{24} \\
p_{31} &amp; p_{32} &amp; p_{33} &amp; p_{34} \\
\end{bmatrix}
\begin{bmatrix}
x_r \\ y_r \\ z_r \\ 1
\end{bmatrix}
\]</div>
<p>我们发现，除了 <span class="arithmatex">\(\mathbf{x}_r\)</span> 的部分都是已知的，此时我们就可以「联立」这两个方程，将他们重排列为如下形式：</p>
<div class="arithmatex">\[
\underbrace{
\begin{bmatrix}
    u_r m_{31} - m_{11} &amp; u_r m_{32} - m_{12} &amp; u_r m_{33} - m_{13} \\ 
    v_r m_{31} - m_{21} &amp; v_r m_{32} - m_{22} &amp; v_r m_{33} - m_{23} \\ 
    u_l p_{31} - p_{11} &amp; u_l p_{32} - p_{12} &amp; u_l p_{33} - p_{13} \\  
    v_l p_{31} - p_{21} &amp; v_l p_{32} - p_{22} &amp; v_l p_{33} - p_{23}
\end{bmatrix}
}_{A_{4\times 3}}
\underbrace{
\begin{bmatrix}
    x_r \\ y_r \\ z_r
\end{bmatrix}
}_{\mathbf{x}_r}
=
\underbrace{
\begin{bmatrix}
    m_{14} - m_{34} \\
    m_{24} - m_{34} \\  
    p_{14} - p_{34} \\ 
    p_{24} - p_{34}
\end{bmatrix}
}_{\mathbf{b}}
\]</div>
<p>我们已知 <span class="arithmatex">\(A_{4 \times 3}\)</span> 和 <span class="arithmatex">\(\mathbf{b}\)</span>，需要求 <span class="arithmatex">\(\mathbf{x}_r\)</span>。</p>
<p>我们之前已经提到，由于实际数据存在误差，所以我们没发直接求其解析解，而是可以使用最小二乘的结论，得到：</p>
<div class="arithmatex">\[
\mathbf{x}_r = (A^TA)^{-1}A^T\mathbf{b}
\]</div>
<hr/>
<p>还有一种改进，就是将它转化成最小化<strong>再投影误差(Reprojection Error)</strong>的优化问题。</p>
<p>换句话来说，就是求一个 <span class="arithmatex">\(X\)</span> 使得它在两个成像平面上的投影和实际的投影之间的误差最小。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/95.png"><img alt="" src="../img/95.png"/></a></p>
<p>定义再投影误差为：</p>
<div class="arithmatex">\[
cost(P) = dist(\mathbf{u}_l, \cap{\mathbf{u}_l})^2 + dist(\mathbf{u}_r, \cap{\mathbf{u}_r})^2
\]</div>
</details>
<hr/>
<h3 id="具体步骤">具体步骤<a class="headerlink" href="#具体步骤" title="Permanent link">¶</a></h3>
<div class="admonition eg">
<p class="admonition-title">前提</p>
<p>两个相机的<strong><a href="#内参矩阵">内参矩阵</a></strong><span class="arithmatex">\(K\)</span> 已知。</p>
<p>这意味着我们可以根据这些参数将相机成像可视化，如下图。</p>
<p>其中下标为 <span class="arithmatex">\(l\)</span> 的表示左侧相机的相关关键点，下标为 <span class="arithmatex">\(r\)</span> 的表示右侧相机的相关关键点。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/87.png"><img alt="" src="../img/87.png"/></a></p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤一</p>
<p>对两张图片进行 <a href="../Lec05/#图像特征匹配">关键点匹配</a>，找到至少 8 对匹配特征。</p>
<hr/>
<p>「为什么需要 8 对」这个问题我们在 <a href="#极线约束">#极线约束/求解过程</a> 中已经说明。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/88.png"><img alt="" src="../img/88.png"/></a></p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤二</p>
<p>按照 <a href="#极线约束">#极线约束/求解过程</a> 提到的步骤，求解两个相机坐标的变换参数 <span class="arithmatex">\(R\)</span> 和 <span class="arithmatex">\(\mathbf{t}\)</span>。</p>
</div>
<div class="admonition section">
<p class="admonition-title">步骤三</p>
<p>接下来对于每一对匹配的关键点，按照 <a href="#三角测量">#三角测量</a> 提到的方法，求解空间点 <span class="arithmatex">\(X_i\)</span>。</p>
</div>
<p>于是我们就得到了所有匹配的关键点计算得到的空间点，最终得到一份稀疏的空间点云。</p>
<hr/>
<h2 id="多目三维重建">多目三维重建<a class="headerlink" href="#多目三维重建" title="Permanent link">¶</a></h2>
<p>Sequential SfM：</p>
<ol>
<li>从其中两张开始，对场景进行重建</li>
<li>之后不断拿出新的图像，根据已知计算 camera pose，再进一步优化之前重建出来的 3D 点，以及增加一些新的点</li>
<li>使用集束优化进一步优化和调整</li>
</ol>
<hr/>
<h3 id="集束优化">集束优化<a class="headerlink" href="#集束优化" title="Permanent link">¶</a></h3>
<p><strong>集束优化(Bundle Adjustment)</strong>也就是在多目情况下，对于所有点的 再投影误差 优化问题：</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/96.png"><img alt="" src="../img/96.png"/></a></p>
<div class="arithmatex">\[
\mathop{minimize} \limits_\mathbf{P} E(P_{proj}, \mathbf{P}) = \sum^m_{i=1}\sum^n_{j=1} dist(u_j^{(i)}, P_{proj}^{(i)}\mathbf{P}_j)^2
\]</div>
<p>其求解可以使用 LM algorithm。</p>
<hr/>
<div class="admonition extra">
<p class="admonition-title">A modern SfM system: COLMAP</p>
<ul>
<li>GitHub Repo: <a href="https://github.com/colmap/colmap">https://github.com/colmap/colmap</a></li>
</ul>
<blockquote>
<p>COLMAP is a general-purpose Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline with a graphical and command-line interface. It offers a wide range of features for reconstruction of ordered and unordered image collections. </p>
</blockquote>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/94.png"><img alt="" src="../img/94.png"/></a></p>
</div>
<hr/>
<div class="md-source-file">
<small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年1月19日 15:53:31</span>
<br/>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年1月13日 19:00:24</span>
</small>
</div>
<form class="md-feedback" hidden="" name="feedback">
<fieldset>
<legend class="md-feedback__title">
        激励
      </legend>
<div class="md-feedback__inner">
<div class="md-feedback__list">
<button class="md-feedback__icon md-icon" data-md-value="1" title="激励" type="submit">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M377.1 68.05C364.4 50.65 343.7 40 321.2 40h-13.53c-3.518 0-7.039.275-10.53.818C284.8 31.33 269.6 26 253.5 26H240c-3.977 0-7.904.37-11.75 1.084C216.7 10.71 197.6 0 176 0h-16c-35.3 0-64 28.65-64 64v49.71L63.04 143.3C43.3 160 32 184.6 32 210.9v78.97c0 32.1 17.11 61.65 44.65 77.12L112 386.9V488c0 13.3 10.7 24 23.1 24s24.9-10.7 24.9-24V358.1c-1.316-.654-2.775-.92-4.062-1.639l-55.78-31.34C87.72 318.2 80 304.6 80 289.9v-79c0-12.31 5.281-23.77 14.5-31.39L112 163.8V208c0 8.8 7.2 16 16 16s16-7.156 16-16V64c0-8.828 7.188-16 16-16h16c8.8 0 16 7.17 16 16v16c0 9.578 7.942 16.04 16.15 16.04 6.432 0 12.31-4.018 14.73-10.17C223.3 84.84 228.3 74 240 74h13.53c20.97 0 17.92 19.58 34.27 19.58 8.177 0 9.9-5.584 19.88-5.584h13.53c25.54 0 18.27 28.23 38.66 28.23.156 0 .313-.002.467-.008L375.4 116c12.7 0 24.6 11.7 24.6 26v130c0 36.15-19.54 67.32-48 83.69v132.3c0 13.31 10.7 24.01 23.1 24.01s24.9-10.7 24.9-24V379.9c30.1-27.1 48-66.3 48-107.9V142c0-39.9-31.2-72.56-70.9-73.95z"></path></svg>
</button>
</div>
<div class="md-feedback__note">
<div data-md-value="1" hidden="">
<center> 难道说……你愿意给我买一瓶快乐水吗！🫣 </center> <img src="https://s2.loli.net/2023/08/03/EGbIvMQXalKTsUi.png" width="200px"/>
</div>
</div>
</div>
</fieldset>
</form>
<h2 id="__comments">评论</h2>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOIVXFKs4CSVPj" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="IsshikiHugh/notebook" data-repo-id="R_kgDOIVXFKg" data-strict="0" data-theme="light" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            回到页面顶部
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2022 Isshiki修
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/IsshikiHugh" rel="noopener" target="_blank" title="Github">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
<script src="../../../_js/extra.js"></script>
<script src="../../../_js/katex.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>