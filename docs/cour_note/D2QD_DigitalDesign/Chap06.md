# Chap 6 Registers & Register Transfers

## å¯„å­˜å™¨

**å¯„å­˜å™¨(registers)**ç²—ç•¥çš„æ¥è¯´å°±æ˜¯ä¸€å †è§¦å‘å™¨ä»¥åŠå¯¹åº”çš„çŠ¶æ€æ§åˆ¶ç”µè·¯ï¼Œç”¨æ¥å®ç°å¤šä½æ•°æ®çš„å­˜å‚¨ç­‰æ“ä½œã€‚

å…¶ä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„å¯„å­˜å™¨å«**[è®¡æ•°å™¨(counter)](#è®¡æ•°å™¨)**ï¼Œéå¸¸ç›´ç™½çš„ï¼Œå®ƒçš„è¡Œä¸ºå°±æ˜¯éšç€æ—¶é’Ÿå‘¨æœŸä¸æ–­åœ¨å›ºå®šçš„çŠ¶æ€åºåˆ—ä¸­å¾ªç¯ã€‚æ›´å½¢è±¡çš„ï¼Œä¸€èˆ¬æ˜¯å®ç°è‡ªåŠ¨çš„è®¡æ•°åŠŸèƒ½ï¼Œåƒç”µå­æ—¶é’Ÿé‚£æ ·ã€‚

> Registers are useful for storing and manipulating information; counters are employed in circuits that sequence and control operations in a digital system.

å®ç°å¯„å­˜å™¨ä¸€ä¸ªæœ€ç›´ç™½çš„æƒ³æ³•å°±æ˜¯å…¬ç”¨æ§åˆ¶çº¿è·¯å’Œåˆ†åˆ—æ•°æ®çº¿è·¯æ¥æ§åˆ¶å¤šä¸ªè§¦å‘å™¨ï¼Œå¦‚ä¸‹å›¾æ˜¯ä½¿ç”¨ D `FF` å®ç°çš„ä¸€ä¸ª 4-bit registerï¼š

![](img/95.png)

æˆ‘ä»¬ç§°æ–°æ•°æ®è¢«å†™å…¥å¯„å­˜å™¨çš„æ“ä½œä¸º**è½½å…¥(load)**ï¼Œè€Œå¦‚æœè½½å…¥æ“ä½œåœ¨åŒä¸€ä¸ªæ—¶é’Ÿè„‰å†²ä¸­å®Œæˆï¼Œæˆ‘ä»¬ç§°ä¹‹æ˜¯**å¹¶è¡Œ(parallel)**çš„ã€‚

---

### ä¿æŒ

ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå¦‚å›¾çš„å¯„å­˜å™¨åœ¨æ¯ä¸ªæ—¶é’Ÿéƒ½å…è®¸è½½å…¥ï¼Œæ¢å¥è¯æ¥è¯´æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸéƒ½ä¼šæ”¹å˜ä¸ºè¾“å…¥ã€‚ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å³ä½¿æˆ‘ä»¬ä¸ç®¡å®ƒå®ƒä¹Ÿèƒ½ä¿æŒä¹‹å‰çš„å€¼ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ¡ˆã€‚

!!! tip "æ–¹æ¡ˆ A"
    å…¶ä¸­ä¸€ä¸ªåšæ³•æ˜¯éœ€è¦é€‰æ‹©æ€§çš„è®©å®ƒè·Ÿéšæ—¶é’Ÿè„‰å†²åˆ‡æ¢çŠ¶æ€ã€‚åšæ³•å°±æ˜¯å°† Control ä¿¡å·ä¿®æ”¹ä¸º $C = \overline{Load} + Clock$ï¼Œå¦‚æ­¤è€Œæ¥ï¼Œå½“ $Load = 0$ æ—¶ï¼Œå§‹ç»ˆæœ‰ $C = 0$ï¼Œè„‰å†²æ¶ˆå¤±ï¼Œå¯„å­˜å™¨æ— æ³•è¢«è½½å…¥ã€‚å¦‚ä¸‹å›¾ï¼Œè¿™ç§æŠ€æœ¯å«**é—¨æ§æ—¶é’Ÿ(clock gating)**ã€‚

    ![](img/96.png)

    !!! warning "clock skew"
        ç„¶è€Œï¼Œåœ¨é—¨æ§æ—¶é’ŸæŠ€æœ¯ä¸­ï¼Œç”±äºæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„é€»è¾‘é—¨ï¼Œæ—¶é’Ÿè„‰å†²åˆ°è¾¾ Control çš„æ—¶å€™ä¼šå‡ºç°é¢å¤–çš„ä¼ æ’­å»¶æ—¶ï¼Œå³**æ—¶é’Ÿåç§»(clock skew)**ã€‚è€Œè¿™å¾®å°çš„å»¶æ—¶ä¼šå¯¼è‡´åœ¨æ•´ä¸ªåŒæ­¥ç³»ç»Ÿä¸­ï¼Œä¸åŒç»„ä»¶å¾—åˆ°çš„æ—¶é’Ÿè„‰å†²æœ‰åå·®ï¼Œè€Œè¿™æ˜¯æˆ‘ä»¬æ‰€ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚æ‰€ä»¥åœ¨å®é™…è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬åº”å½“é¿å…æˆ–å°½å¯èƒ½ç¼©å°æ—¶é’Ÿåç§»ã€‚

!!! tip "æ–¹æ¡ˆ B"
    å¦å¤–ä¸€ä¸ªåšæ³•æ˜¯ï¼Œåœ¨ä¸å¸Œæœ›å®ƒä¿®æ”¹çš„æ—¶å€™ï¼Œä¸æ–­å°†å®ƒçš„è¾“å…¥è½½å…¥ï¼Œä¹Ÿå°±æ˜¯ä¿æŒä¸å˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª `MUX` æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œç”¨ `EN` ä½¿èƒ½ç«¯æ¥é€‰æ‹©æ˜¯è½½å…¥æ–°å€¼è¿˜æ˜¯ä¿æŒä¹‹å‰çš„å€¼ï¼Œå¦‚ä¸‹å›¾ã€‚

    ![](img/97.png)

---

## å¯„å­˜å™¨å•å…ƒ

!!! info "å°èŠ‚å¯¼è¯»"
    æœ¬å°èŠ‚åœ¨ä¹¦æœ¬ä¸­çš„ä½ç½®é åï¼Œä½†æ˜¯è€ƒè™‘åˆ°å†…å®¹çš„è¿ç»­æ€§æˆ‘å†³å®šæå‰ï¼Œæœ¬èŠ‚å†…å®¹ä¼šæ¶‰åŠä¸€äº›ä¹‹åçš„å†…å®¹ï¼Œå®é™…ä¸Šçš„ç»å¯¹æ€§çŸ¥è¯†è¾ƒå°‘ï¼Œå¯ä»¥ç²—çœ‹è¿‡ç•™ä¸‹å°è±¡å³å¯ï¼Œå¤§éƒ¨åˆ†çŸ¥è¯†éœ€è¦é€šè¿‡æ¡ˆä¾‹åˆ†æå’Œå®è·µè·å¾—ï¼Œæ˜¯ç±»ä¼¼äºè®¾è®¡æŒ‡å¯¼æ€æƒ³çš„å†…å®¹ã€‚

**å¯„å­˜å™¨å•å…ƒ(Register Cell)**æ˜¯å¯„å­˜å™¨çš„ä¸ªä½“å•å…ƒï¼Œä¸»è¦åŒ…æ‹¬ä¸€ä¸ª `FF` åŠå®ç°å…¶ç»„åˆé€»è¾‘çš„ç»„åˆç”µè·¯ã€‚

> A single-bit cell of an iterative combinational circuit, connected to a flip-flop that provides the output, forms a two-state sequential circuit called a register cell

å¯¹äº n bits çš„å¯„å­˜å™¨å•å…ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°å…¶ 1 bit çš„å¯„å­˜å™¨å•å…ƒï¼Œå¹¶å¤åˆ¶ n ä»½å®ç°ã€‚

è®¾è®¡å¯„å­˜å™¨å•å…ƒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¯„å­˜å™¨å•å…ƒè¿›è¡Œå®šä¹‰ã€‚è€ŒæŒ‡å®š(Specify)ä¸€ä¸ªå¯„å­˜å™¨å•å…ƒçš„åŠŸèƒ½çš„ä¸»è¦æœ‰è¿™äº›æ–¹é¢ï¼š

- å¯„å­˜å™¨çš„åŠŸèƒ½å‡½æ•°ï¼›
    - ä¸€èˆ¬æŒ‡å¯„å­˜å™¨ä¼ è¾“ï¼›
- æ§åˆ¶ä¿¡å·æ„æˆï¼›
    - æœ‰å“ªäº›æ§åˆ¶ä¿¡å·ã€æ˜¯å¦ç¼–ç ã€å¦‚ä½•å†³å®šæ˜¯å¦ Load ç­‰ï¼›
- å¯„å­˜å™¨çš„è¾“å…¥æ•°æ®ï¼›
    - æœ‰å“ªäº›è¾“å…¥æ•°æ®ã€æ˜¯å¦éœ€è¦é¢„å…ˆå¤„ç†ç­‰ï¼›

åœ¨å®é™…å®ç°æ—¶ï¼Œåˆ†ä¸º `MUX` å®ç°å’Œæ—¶åºé€»è¾‘å®ç°ä¸¤ç§æ–¹æ³•ã€‚

å‰è€…å°±æ˜¯**[#åŸºäº Mux å®ç°ä¼ è¾“](#åŸºäº-mux-å®ç°ä¼ è¾“)**ä¸­å°†è¦æåˆ°çš„é‚£æ ·ï¼Œå…³äºä¸Šé¢å“ªäº›å†…å®¹åœ¨è¯¥å°èŠ‚ä¸­çš„ä½“ç°å¦‚ä¸‹å›¾ï¼›

![](img/118.png)

ä¹Ÿå°±æ˜¯é€šè¿‡åˆ†åˆ«å®ç°é€»è¾‘ï¼Œç„¶åé€šè¿‡æ§åˆ¶ä¿¡å·é€‰æ‹©æ•°æ®è¾“å…¥æ¥å®ç°ã€‚

è€Œåè€…æŒ‰ç…§æ—¶åºç”µè·¯çš„è®¾è®¡æ–¹æ³•ï¼Œç¡®å®šçŠ¶æ€å›¾åæ ¹æ®çŠ¶æ€å˜åŒ–è®¾è®¡æ—¶åºç”µè·¯ï¼Œè®¾è®¡ä¼˜åŒ–å†³å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹å®ç°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ**[ç¬¬å››ç« #æ—¶åºç”µè·¯è®¾è®¡](Chap04.md#æ—¶åºç”µè·¯çš„è®¾è®¡)**ã€‚

---

## å¯„å­˜å™¨ä¼ è¾“

!!! warning "è¯´æ˜"
    æŠŠ transfer ç¿»è¯‘ä¸ºâ€œä¼ è¾“â€æ˜¯æˆ‘è„‘ç“œä¸€æ‹çš„è¡Œä¸ºï¼Œæˆ‘å¹¶ä¸çŸ¥é“ç¿»è¯‘æˆä»€ä¹ˆæ¯”è¾ƒåˆé€‚ï¼Œå¦‚æœè¯»è€…æœ‰æ›´å¥½çš„ç¿»è¯‘ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼

ä¸€ä¸ªå¤æ‚ç³»ç»Ÿé™¤äº†ä¿¡æ¯çš„å­˜å‚¨è¿˜éœ€è¦ä¿¡æ¯çš„ä¼ è¾“å’Œå¤„ç†ï¼Œæ¢å¥è¯æ¥è¯´ï¼Œä¸ºäº†å®ç°çµæ´»ã€å¤æ‚çš„è®¡ç®—ï¼Œæˆ‘ä»¬éœ€è¦ä¿¡æ¯ä¹‹é—´èƒ½å¤Ÿå¹¿æ³›åœ°äº¤äº’ã€‚å¤§éƒ¨åˆ†ç”µå­ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª**æ§åˆ¶å•å…ƒ(Control Unit)**æ¥è´Ÿè´£æŒ‡æŒ¥ï¼ˆå†³å®šæŒ‡ä»¤çš„åºåˆ—ï¼‰**æ•°æ®é€šè·¯(Datapath)**è¿›è¡Œæ•°æ®å¤„ç†ã€‚

> Datapaths are defined by their registers and the operations performed on binary data stored in the registers.

å¯¹äºå¯„å­˜å™¨è‡ªèº«è€Œè¨€ï¼Œå®ƒå¯èƒ½å®ç° è½½å…¥(load)ã€æ¸…ç©º(clear)ã€ä½ç§»(shift)ï¼ˆå…³äºè¿™é‡Œçš„shiftçš„å«ä¹‰æˆ‘å­˜ç–‘ï¼‰ å’Œ è®¡æ•°(count) ç­‰ã€‚æ­¤å¤–ï¼Œå¯¹äºé‚£äº›å¯„å­˜å™¨ä¸­çš„æ•°æ®è¿›è¡Œç§»åŠ¨äº†çš„åŠ å·¥ï¼Œè¢«ç§°ä¸º**å¯„å­˜å™¨ä¼ è¾“æ“ä½œ(Register Transfer Operations)**ï¼Œå®ƒä»¬ä¸»è¦åŒ…å«è¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼š

1. ç³»ç»Ÿä¸­çš„å¯„å­˜å™¨é›†åˆï¼›
2. å¯¹äºæ•°æ®çš„æ“ä½œï¼›
3. ç›‘ç£æ“ä½œåºåˆ—çš„æ§åˆ¶ï¼›

å…¶ä¸­ï¼Œæœ€åŸºç¡€çš„é‚£éƒ¨åˆ†æ“ä½œè¢«ç§°ä¸º**å¾®æ“ä½œ(microoperation)**ï¼Œå®ƒä»¬æ˜¯å®ç°å¤æ‚æ“ä½œçš„åŸºç¡€ï¼Œä¾‹å¦‚å°† R1 çš„æ•°æ®è½½å…¥ R2ï¼Œå°† R1 å’Œ R2 ç›¸åŠ ï¼Œæˆ–æ˜¯è‡ªå¢ R1 ç­‰ã€‚å®ƒä»¬é€šå¸¸ä»¥æ¯”ç‰¹å‘é‡ä¸ºè½½ä½“å¹¶è¡Œå®ç°çš„ã€‚

!!! warning "Note that:"
    > the term â€œmicrooperation,â€ as used here, does not refer to any particular way of producing the control signals: specifically, it does not imply that the control signals are generated by a control unit based on a technique called microprogramming.

---

### å¯„å­˜å™¨ä¼ è¾“æ“ä½œ & å¯„å­˜å™¨ä¼ è¾“è¯­è¨€

å¯¹äºç®€å•çš„æ—¶åºé€»è¾‘ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŠ¶æ€æœºç­‰æ–¹å¼æ¥æè¿°å®ƒä»¬çš„è¡Œä¸ºï¼Œä½†æ˜¯å¯¹ä¸è§„æ¨¡æ›´å¤§çš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹æƒ…ã€‚æ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº†ä¸€ç§ä¸“æ³¨äºè¡Œä¸ºé€»è¾‘çš„è¯­è¨€æ¥æè¿°å¯„å­˜å™¨ä¼ è¾“ä¸­çš„é€»è¾‘è¡Œä¸ºï¼š**å¯„å­˜å™¨ä¼ è¾“è¯­è¨€(Register Transfer Language, RTL)**ã€‚

é€šå¸¸å…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¯„å­˜å™¨éƒ½ä¼šç”¨å…¶åç§°ç¼©å†™å¤§å†™è¡¨ç¤ºï¼Œä¾‹å¦‚ AR(Address Register)ï¼ŒPC(Program Counter)ï¼ŒIR(Instruction Register) æˆ–è€…æ›´æ™®é€šçš„ R2(Register 2)ã€‚

> [Little-endian & Big-endian](https://www.geeksforgeeks.org/little-and-big-endian-mystery/)

æˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿä¼šç”¨è¿™äº›å½¢å¼æ¥å›¾å½¢åŒ–çš„è¡¨ç¤ºå¯„å­˜å™¨ï¼š

![](img/99.png)

æ­¤å¤–ï¼Œå¸¸è§æ“ä½œç”¨ RTL è¡¨ç¤ºæ–¹æ³•å’Œç¬¦å·å¦‚ä¸‹ï¼š

![](img/100.png)

![](img/98.png)

éœ€è¦é¢å¤–è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¡¨è¾¾æ¡ä»¶è¯­å¥ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¡¨è¾¾ï¼š

$$
if\, (K_1 = 1) \,then\, (R2 \leftarrow R1)
$$

åˆ™å¯ä»¥å†™ä¸ºï¼š

$$
K_1 : R2 \leftarrow R1
$$

---

## å¯„å­˜å™¨ä¼ è¾“çš„å®ç°

!!! info "å¼•å…¥"
    å¦‚ä½•å®ç°å¯„å­˜å™¨æ‰€å­˜å‚¨çš„æ•°æ®ä¹‹é—´çš„å¤„ç†ä¸äº¤äº’æ˜¯æœ¬ç« èŠ‚çš„æ ¸å¿ƒå‘½é¢˜ã€‚å¦‚æœè¯´**[å¾®æ“ä½œ](#å¾®æ“ä½œåŠå…¶å®ç°)**å¤„ç†çš„æ˜¯æ•°æ®ä¹‹é—´çš„å¤„ç†ï¼Œé‚£**[å¯„å­˜å™¨ä¼ è¾“](#å¯„å­˜å™¨ä¼ è¾“)**åˆ™ç€çœ¼äºæ•°æ®ä¹‹é—´çš„äº¤äº’ã€‚
    
    æ¢å¥è¯æ¥è¯´ï¼Œå¦‚ä½•æŠŠæ•°æ®ç»™åˆ°åˆ«çš„å¯„å­˜å™¨ã€å¦‚ä½•è·å–åˆ«çš„å¯„å­˜å™¨ç»™åˆ°çš„æ•°æ®ã€å¦‚ä½•ä¼ è¾“å’Œé€‰æ‹©è¿™äº›æ•°æ®ï¼Œå°±æ˜¯æœ¬å°èŠ‚è¦è§£å†³çš„é—®é¢˜ã€‚

    ç‰¹åˆ«çš„ï¼Œå¯„å­˜å™¨ä¼ è¾“çš„å®ç°å¯ä»¥ç›´æ¥å®ç°**[è½¬ç§»](#è½¬ç§»)**æ“ä½œã€‚

### åŸºäº MUX å®ç°ä¼ è¾“

å¯¹äºä¸€ä¸ªå•ä¸€å¯„å­˜å™¨ï¼Œå®ƒçš„**è¾“å…¥**å¯èƒ½æœ‰å¤šç§æ¥æºï¼Œä¾‹å¦‚å…¶å®ƒå¯„å­˜å™¨ï¼Œåˆæˆ–è€…æ˜¯å…¶ä»–æ“ä½œçš„ç»“æœã€‚æ€»è€Œè¨€ä¹‹ï¼Œå®ƒçš„è¾“å…¥å¾ˆå¯èƒ½æ˜¯ä¸å”¯ä¸€çš„ï¼Œè€ŒåŒä¸€æ—¶åˆ»æˆ‘ä»¬åªèƒ½æ¥å—ä¸€ä¸ªæ¥æºçš„è¾“å…¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `MUX` æ¥å¯¹è¾“å…¥è¿›è¡Œé€‰æ‹©ã€‚

ä¸€ä¸ªç®€å• ğŸŒ° å¦‚ä¸‹ï¼š

![](img/106.png)

ç”¨è¯­è¨€æ¥æè¿°è¿™ä¸ªæ€»ä½“æ¶æ„å°±æ˜¯ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ç³»åˆ— one-hot ç¼–ç ï¼ˆä¸ç¡®å®šï¼Œä¹Ÿè®¸å¯èƒ½éƒ½ä¸ºé›¶ï¼Ÿæˆ‘æ„Ÿè§‰å–å†³äº**[ä¿æŒ](#ä¿æŒ)**çš„å®ç°ã€‚ï¼‰æ¥è¡¨ç¤ºé€‰æ‹©å“ªä¸ªè¾“å…¥æºï¼ˆä¸‹å›¾ä¸­ $K_0\sim K_{n-1}$ï¼‰ï¼Œå†é€šè¿‡ `Encoder` å°†å®ƒä»¬ç¼–ç ä½œä¸º `MUX` çš„è¾“å…¥é€‰æ‹©ä¿¡å·ï¼ˆä¸‹å›¾ä¸­ $S_m \sim S_0$ï¼‰ï¼Œä»å¤šä¸ªè¾“å…¥æºï¼ˆä¸‹å›¾ä¸­ 0 \sim k \sim (n-1)$ï¼‰ä¸­é€‰æ‹©å¯¹åº”çš„æºï¼Œå¹¶è¾“å‡ºï¼Œç»™åˆ° R0ï¼›æ­¤å¤–ï¼Œå°†é€‰æ‹©ä¿¡å·éƒ½æˆ–èµ·æ¥ï¼Œä½œä¸º R0 çš„ Load ä¿¡å·è¾“å…¥ã€‚

![](img/105.png)

> å…¶ä¸­ `MUX` çš„ $k \sim (n-1)$ å®ç°äº†**[è½¬ç§»](#è½¬ç§»)**æ“ä½œã€‚

!!! summary "å°ç»“"

    æ¢å¥è¯æ¥è¯´ï¼Œ`MUX` å®ç°ä¸»è¦çš„å®ç°äº†**å¤šå¯¹ä¸€**çš„æ•°æ®ä¼ è¾“é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬å•å•ä½¿ç”¨ `MUX` æ¥å®Œæˆå¯„å­˜å™¨ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼ˆå‡è®¾æ‰€æœ‰å¯„å­˜å™¨éƒ½èƒ½ç›¸äº’ä¼ è¾“æ•°æ®ï¼‰ï¼Œé‚£å°†è¿™ä¸ªæ¨¡å‹ï¼ˆå›¾ä¾‹åœ¨[ä¸‹ä¸€å°èŠ‚](#åŸºäºæ€»çº¿å®ç°ä¼ è¾“)ï¼‰æŠ½è±¡åï¼Œæˆ‘ä»¬å¾—åˆ°çš„å°†æ˜¯ä¸€å¼ â€œ**[å®Œå…¨å›¾](https://zh.wikipedia.org/zh-cn/%E5%AE%8C%E5%85%A8%E5%9C%96)**â€ï¼Œç„¶è€Œå®ƒè‚‰çœ¼å¯è§çš„å¼€é”€å¤§ã€‚

    è€Œæ€»çº¿åˆ™éå¸¸å·§å¦™åœ°ä¼˜åŒ–äº†è¿™ä¸ªé—®é¢˜ï¼ˆå¹¶ä¸æ˜¯ä¸Šä½æ›¿ä»£å…³ç³»ï¼‰ã€‚

---

### åŸºäºæ€»çº¿å®ç°ä¼ è¾“

åœ¨[ä¸Šä¸€å°èŠ‚](#åŸºäº-mux-å®ç°ä¼ è¾“)çš„å°ç»“ä¸­æˆ‘ä»¬å·²ç»æåˆ°äº† `MUX` å®ç°çš„ä¼˜åŠ£ï¼Œä¹Ÿæåˆ°äº†**æ€»çº¿(bus)**ä¼ è¾“çš„ä¼˜åŠ¿ï¼Œé‚£ä¹ˆå®ƒå…·ä½“æ¥è¯´å…¶å®ç°æ–¹æ³•æœ‰ä¸¤ç§â€”â€”é€šè¿‡å…±æœ‰ `MUX` å®ç°ï¼Œæˆ–é€šè¿‡ä¸‰æ€é—¨å®ç°ã€‚

---

#### å…±æœ‰ MUX å®ç°

è®©æˆ‘ä»¬ä»¥ä¸‰ä¸ªå¯„å­˜å™¨çš„æ¨¡å‹ä¸ºä¾‹ï¼Œå¯¹æ¯”é€šè¿‡ä¸“æœ‰ `MUX` å®ç°å’Œé€šè¿‡**å•ä¸€æ€»çº¿(single bus)**å®ç°çš„åŒºåˆ«ï¼š

![](img/107.png)

é¦–å…ˆå¯¹æ€»çº¿å®ç°è¿›è¡Œè¯´æ˜ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨ `MUX`ï¼Œä½†æ­¤æ—¶ `MUX` ä¸å†æ˜¯æŸä¸ªå¯„å­˜å™¨çš„**ä¸“æœ‰é€»è¾‘(dedicated logic)**ï¼Œè€Œæ˜¯ä¸‰ä¸ªå¯„å­˜å™¨å…±åŒä½¿ç”¨çš„**å…±æœ‰é€»è¾‘(shared logic)**ã€‚æ€»çº¿ä¸­çš„ `MUX` åœ¨æ‰€æœ‰å¯„å­˜å™¨çš„è¾“å…¥ä¸­é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œå¹¶å°†å®ƒè¾“å‡ºï¼Œç»™åˆ°æ‰€æœ‰å¯„å­˜å™¨ï¼›è€Œæ€»çº¿é€šè¿‡æ§åˆ¶ Load ä¿¡å·æ¥é€‰æ‹©è®©å“ªä¸ªï¼ˆæˆ–å“ªäº›ï¼‰å¯„å­˜å™¨å¾—åˆ°è¿™ä¸ªä¿¡å·ã€‚

æ¥ä¸‹æ¥è¿›è¡Œå¯¹æ¯”ï¼Œä»¥æ€»çº¿å®ç°ä¸ºä¸»ä½“ï¼Œä¸ `MUX` å®ç°å¯¹æ¯”ï¼š

- ä¼˜åŠ¿ï¼š
    - ç”µè·¯æ›´ç²¾ç®€ï¼Œæˆæœ¬æ›´ä½ï¼Œéšç€å¯„å­˜å™¨å¢åŠ è¿™ä¸ªç‰¹ç‚¹æ›´åŠ æ˜æ˜¾ï¼›
- åŠ£åŠ¿ï¼š
    - åŒä¸€æ—¶åˆ»å†…æ€»çº¿åªèƒ½ä¼ è¾“ä¸€ä¸ªæ•°æ®ï¼Œå³åªæœ‰ä¸€ä¸ªæ•°æ®æº(source)ï¼›
        - åŒä¸€æ—¶é’Ÿå‘¨æœŸå†…åªæœ‰ä¸€ä¸ªæ•°æ®èƒ½ä¼ è¾“åˆ°åˆ«çš„åœ°æ–¹ï¼Œä¾‹å¦‚äº¤æ¢æ“ä½œå°±éœ€è¦è‡³å°‘ä¸¤ä¸ª bus æ‰èƒ½å®ç°ï¼›

è€Œå› ä¸ºè¿™äº›ç‰¹ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦è¯„ä¼°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„ç»“æ„æ¥å®ç°ã€‚

---

#### ä¸‰æ€é—¨å®ç°

ä¸‰æ€é—¨çš„ç›¸å…³å†…å®¹å·²ç»åœ¨å‰é¢ä»‹ç»ï¼Œä¼ è¾“é—¨åœ¨**[è¿™é‡Œ](Chap02.md#ä¸‰æ€é—¨)**ï¼Œå…³äºæœ¬å°èŠ‚çš„çŸ¥è¯†ï¼Œå¯ä»¥é‡ç‚¹å…³æ³¨**[#ä¸‰æ€é—¨/ç¢ç¢å¿µ](Chap02.md#ä¸‰æ€é—¨)**ã€‚

è€Œå…³äºæ€»çº¿çš„å®ç°ï¼Œå¼•ç”¨ä¸€å¥æˆ‘åœ¨**[#ä¸‰æ€é—¨/ç¢ç¢å¿µ](Chap02.md#ä¸‰æ€é—¨)**é‡Œå†™çš„è¯ï¼š

> åªè¦æˆ‘ä»¬è®©å¯¼çº¿çš„è‹¥å¹²è¾“å…¥ä¸­åªæœ‰ä¸€ä¸ªä¸‰æ€é—¨ä¸åœ¨ã€Œé«˜é˜»æ€ã€ï¼Œå°±èƒ½å¤Ÿä¼˜é›…åœ°å®ç°å¤šè·¯è¾“å‡ºäº’è”ã€‚

å®é™…ä¸Šï¼Œæ‰€è°“çš„ä¸‰æ€é—¨å®ç°åŸç†ä¸Šå’Œ `MUX` å®ç°æ— äºŒï¼Œåªä¸è¿‡æˆ‘ä»¬æ˜¯é€šè¿‡ä¸‰æ€é—¨æ¥å®ç°ã€Œè·¯ç”±ã€è¿™ä¸ªé€»è¾‘è€Œå·²ï¼Œä¹Ÿå°±æ˜¯ä¹¦ä¸Šæ‰€è¯´çš„ï¼š

> Three-state buffer outputs can be connected together to form a multiplexed output line.

ä¸ `MUX` å®ç°ç›¸å¯¹æ¯”ï¼Œä¸‰æ€é—¨å®ç°æ–¹å¼å¦‚ä¸‹ï¼š

![](img/108.png)

è¿›è¡Œç®€å•è¯´æ˜ï¼Œ\(c) ä¸­å¯¹ä¸‰æ€é—¨çš„è¡¨ç¤ºè¿›è¡Œäº†ç®€åŒ–ï¼Œå«ä¹‰å‚è€ƒ \(a)ã€‚å®ƒæƒ³è¡¨è¾¾çš„ä¸»è¦å«ä¹‰æ˜¯ï¼Œå½“ `EN` ä¸º `1` æ—¶ï¼Œè¡¨ç¤ºè¾“å‡ºï¼›åä¹‹è¡¨ç¤ºè¾“å…¥ï¼ˆå½“ç„¶ï¼ŒçœŸæ­£å†³å®šæ˜¯å¦è¯»å…¥å¯„å­˜å™¨çš„è¿˜æ˜¯ `LD`ï¼‰ã€‚

??? question "ä¸ªäººç–‘æƒ‘"
    ä¹¦ä¸­çš„è¡¨è¿°æ˜¯ï¼š

    > If the three-state buffers are enabled, then the lines are outputs; if the three-state buffers are disabled, then the lines can be inputs.

    ä½†æ˜¯çœ‹ \(a) çš„è¡¨è¾¾ï¼Œä¸ç®¡ `EN` æ˜¯ä»€ä¹ˆï¼Œå®ƒåº”å½“éƒ½æœ‰è¾“å…¥æ‰å¯¹ï¼ŒçœŸæ­£å†³å®šæ˜¯å¦è¾“å…¥è¿›æ¥çš„åº”è¯¥è¿˜æ˜¯ `LD`ï¼Ÿ

å¯¹æ¯”æ¥çœ‹ï¼Œä¸‰æ€é—¨çš„å®ç°å¤§å¤§é™ä½äº†æ€»çº¿çš„å®ç°æˆæœ¬ï¼Œç²¾ç®€äº†ç”µè·¯çš„å®ç°ï¼Œæ‰€ä»¥é€šå¸¸æ¥è¯´æ›´å¸¸ç”¨ã€‚

??? note "ä¸ªäººæƒ³æ³•"
    è™½ç„¶ä¹¦ä¸­è¯´ä¸‰æ€é—¨çš„æ¥çº¿æ¯” `MUX` çš„å°‘äº†ä¸€åŠï¼Œä½†æˆ‘è§‰çš„ä¸‰æ€é—¨åªæ˜¯æŠŠçº¿åˆ†å²”çš„åœ°æ–¹ç§»åŠ¨åˆ°äº†å¯„å­˜å™¨é™„è¿‘ï¼Œæ¢å¥è¯æ¥è¯´ä¸å¦‚è¯´æ˜¯èŠ‚çœäº†å¯¼çº¿çš„é•¿åº¦ã€‚ä½†æ˜¯éšç€è¾“å…¥çš„å¢åŠ ï¼Œ`MUX` çš„ç»“æ„ä¼šè¶Šæ¥è¶Šå¤æ‚ä¸”éœ€è¦é‡æ–°è®¾è®¡ï¼Œä½†ä¸‰æ€é—¨åªéœ€è¦é‡çš„å¢åŠ å°±è¡Œäº†ï¼Œæ‰€ä»¥ç¡®å®æ˜¯æ›´åŠ å¸å¼•äººã€‚ï¼ˆå½“ç„¶ï¼Œè™½ç„¶ä¹¦ä¸­æ²¡è¯´ï¼Œä½†æ˜¯æˆ‘è§‰å¾— Enable å¿…é¡» at most one-hotï¼Œè€Œè¿™éƒ¨åˆ†çš„é€»è¾‘å¯¹äºä¸¤ä¸ªå®ç°æ–¹æ³•æ¥è¯´æ˜¯ä¸€æ ·çš„ï¼‰

---

## å¾®æ“ä½œåŠå…¶å®ç°

> A microoperation is an elementary operation performed on data stored in registers or in memory.

å¾®æ“ä½œä¸€èˆ¬åˆ†ä¸ºè¿™å››ç§ï¼š

1. è½¬ç§»ï¼Œtransfer microoperationsï¼Œå°†æ•°æ®ä»ä¸€ä¸ªå¯„å­˜å™¨è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªå¯„å­˜å™¨ï¼›
2. ç®—æœ¯ï¼Œarithmetic microoperationsï¼Œå¯¹æ•°æ®çš„ç®—æœ¯è¿ç®—æ“ä½œï¼›
3. é€»è¾‘ï¼Œlogic microoperationsï¼Œå¯¹æ•°æ®çš„é€»è¾‘è¿ç®—æ“ä½œï¼›
4. ä½ç§»ï¼Œshift microoperationsï¼Œå¯¹æ•°æ®çš„ä½ç§»æ“ä½œï¼›

> A given microoperation may be of more than one type. For example, a 1s complement operation is both an arithmetic microoperation and a logic microoperation.

---

### è½¬ç§»

ä¸æ”¹å˜æ•°æ®æœ¬èº«ï¼Œåªæ˜¯ä»ä¸€ä¸ªå¯„å­˜å™¨ä¸­æŠŠæ•°æ®ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªå¯„å­˜å™¨ã€‚

å°† R0 ä¸­çš„æ•°æ®è½¬ç§»åˆ° R1 ä¸­ï¼Œç”¨ RTL è¡¨ç¤ºå°±æ˜¯ $R0 \leftarrow R1$ã€‚

è¿™ä¸€éƒ¨åˆ†çš„å®ç°é€”å¾„åœ¨**[å¯„å­˜å™¨ä¼ è¾“çš„å®ç°](#å¯„å­˜å™¨ä¼ è¾“çš„å®ç°)**å·²ç»é˜è¿°ã€‚

---

### ç®—æœ¯

![](img/101.png)

> Multiplication and division are not listed in Table 6-3. Multiplication can be represented by the symbol * and division by /. These two operations are not included in the basic set of arithmetic microoperations because they are assumed to be implemented by sequences of basic microoperations. However, multiplication can be considered as a microoperation if implemented by a combinational circuit. In such a case, the result is transferred into a destination register at the clock edge after all signals have propagated through the entire combinational circuit

!!! eg "åŠ å‡æ³•å™¨"
    å°±åƒæˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„ï¼Œç”¨åŠ æ³•å™¨å®ç°åŠ å‡æ³•å™¨ï¼Œåœ¨ RTL å’Œæ¨¡å—é€»è¾‘ç”µè·¯çš„ç»´åº¦ä¸‹ï¼Œå¯ä»¥è¿™ä¹ˆè¡¨ç¤ºï¼š

    $$
    \begin{aligned}
        &\overline{X}K_1:R_1\leftarrow R_1 + R_2 \\
        &XK_1:R_1\leftarrow R_1 + \overline{R_2} + 1
    \end{aligned}
    $$

    ![](img/102.png)

!!! warning "æ³¨æ„"
    å¯¹äºå¦‚ä¸Šå‡ºç°çš„å½¢å¼å¦‚ï¼š$condition: reg \leftarrow options one regs$ çš„è¡¨è¾¾å¼ï¼Œ`:` å·¦ä¾§å‡ºç°çš„ `+` è¡¨ç¤ºæˆ–ï¼Œå³ä¾§çš„åˆ™è¡¨ç¤ºåŠ ï¼ˆâ€œä¹˜â€ä¹Ÿæ˜¯è¿™æ ·ï¼‰ï¼

ç›¸å¯¹åº”çš„ï¼ŒåŠ å‡æ³•çš„å®ç°å¯ä»¥é€šè¿‡åŠ å‡æ³•å™¨å®ç°ï¼Œä¹˜æ³•å¯ä»¥ç”¨**[ä½ç§»](#ä½ç§»)**æ“ä½œå®ç°ï¼Œè€Œé™¤æ³•ç›¸å¯¹å¤æ‚ã€‚

!!! note "ä¹˜æ³•å®ç°çš„<u>å¤§è‡´</u>æ€è·¯"
    å‡è®¾æˆ‘ä»¬éœ€è¦è®¡ç®— $a \cdot b$ï¼Œä¸” $a$ï¼Œ$b$ éƒ½æ˜¯æ•´æ•°ï¼Œåˆ™å¯ä»¥å°† $b$ å†™æˆäºŒè¿›åˆ¶å½¢å¼ $(b_{n-1}b_{n-2}...b_1b_0)_2$ï¼Œäºæ˜¯ï¼š

    $$
    \begin{aligned}
        a \cdot b &= a \cdot (b_{n-1}b_{n-2}...b_1b_0)_2 \\
                  &= a \cdot \left[ (b_{n-1}0...00)_2 + \cdot (0b_{n-2}...00)_2 + ... + \cdot (00...b_10)_2 + \cdot(00...0b_0)_2 \right]\\
                  &= a \cdot \sum_{i = 0} ^{n-1} b_i \cdot 2^{i} \\
                  &= \left(a \cdot \sum_{i = 0} ^{n-1} b_i\right) \;\mathrm{<<}\; i \;\;\; \text{where "<<" means "Shift Left"}
    \end{aligned}
    $$

    äºæ˜¯å°±å¯ä»¥é€šè¿‡**[ä½ç§»](#ä½ç§»)**çš„ç›¸å…³çŸ¥è¯†æ¥å®ç°ã€‚

---

### é€»è¾‘

![](img/103.png)

é€»è¾‘è¿ç®—çš„å®ç°ç›¸æ¯”ç®—æœ¯æ›´åŠ ç›´æ¥ï¼Œå› ä¸ºå¤§éƒ¨åˆ†é€»è¾‘éƒ½å¯ä»¥é€šè¿‡é€»è¾‘é—¨æ¥å®ç°ã€‚

---

!!! note ""
    è€Œæ‰¿æ‹…é€»è¾‘å’Œç®—æœ¯è¿ç®—çš„ç¡¬ä»¶æ¨¡å—ï¼Œä¸€èˆ¬è¢«ç§°ä¸º**ALU**ã€‚

---

### ä½ç§»

![](img/104.png)

ä½ç§»çš„å®ç°é€šè¿‡**ä½ç§»å¯„å­˜å™¨(Shift Register, SHR)**å®ç°ã€‚

!!! info "å¼•å…¥"
    ä½ç§»æ“ä½œä»æœ¬è´¨ä¸Šæ¥è®²ï¼Œæ˜¯é€šè¿‡**è§¦å‘å™¨éšç€æ—¶é’Ÿè„‰å†²ï¼Œå°†ä¸²è¡Œæ•°æ®ä¸€ä½ä¸€ä½åœ°ç§»åŠ¨**å®ç°çš„ã€‚ä½†æ˜¯å¦‚æœè¯»è€…å°šæœªç†è§£å…¶å®ç°åŸç†ï¼Œé˜…è¯»ä»¥ä¸‹å†…å®¹åˆšå¼€å§‹å¯èƒ½ä¼šè§‰å¾—æœ‰äº›è«åå…¶å¦™ï¼Œä½†æ˜¯è¯·å…ˆé˜…è¯»**[ä¸²è¡Œå®ç°](#ä¸²è¡Œå®ç°)**å’Œ**[å¹¶è¡ŒåŒ–](#å¹¶è¡ŒåŒ–)**çš„å†…å®¹ï¼ŒçŸ¥é“å®ƒä»¬çš„è¡Œä¸ºåï¼Œå¯ä»¥å…ˆæš‚æ—¶è·³è¿‡**[åŒå‘ä½ç§»å¯„å­˜å™¨](#åŒå‘ä½ç§»å¯„å­˜å™¨)**ï¼Œå†æ¥çœ‹æœ¬èŠ‚æœ«å°¾çš„æ€»ç»“ï¼Œä¹Ÿè®¸èƒ½å¤Ÿè®©æ‚¨æ˜ç™½å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°çš„ã€‚

#### ä¸²è¡Œå®ç°

ä½ç§»æ“ä½œæœ€ç®€å•çš„å®ç°åªéœ€è¦ä¸è¾“å…¥æ•°ç›¸åŒä½æ•°çš„è§¦å‘å™¨å®ç°ã€‚å®ƒçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š

![](img/109.png)

> å››ä¸ªè§¦å‘å™¨é¦–å°¾ç›¸è¿ï¼Œæœ€å‰é¢**ä¸²è¡Œè¾“å…¥(Serial Input, SI)**æ•°æ®ï¼Œæœ«ç«¯å¾—åˆ°**ä¸²è¡Œè¾“å‡º(Serial Output, SO)**ï¼Œåœ¨ä¸åŒæ—¶é’Ÿå‘¨æœŸçš„åå·®ä¸‹ï¼Œè¿ç»­è¯»å…¥çš„ n bits å³ä¸ºä¸åŒä½æ•°ä½ç§»çš„ç»“æœã€‚

!!! eg "ä¸²è¡Œä½ç§»æ“ä½œå®ç°çš„æ¨¡æ‹Ÿè§£é‡Š"
    å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ 4 ä¸ª `FF` é¦–å°¾ç›¸è¿ï¼Œç°åœ¨ä¸²è¡Œè¾“å…¥ `1001` è¿™ 4bits çš„æ•°æ®ï¼ˆå½“ç„¶ï¼Œå®Œå…¨è¾“å…¥éœ€è¦ 4 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰ã€‚

    å‡è®¾ç¬¬ 1 ä¸ªå‘¨æœŸç»“æŸåï¼Œ`1001` æœ€å³ä¾§çš„ `1` è¢«å­˜åœ¨äº†ç¬¬ä¸€ä¸ª FFï¼Œåˆ™ï¼š

    |å‘¨æœŸ|å¾…è¾“å…¥|FF1|FF2|FF3|FF4|SO|
    |:--:|--:|:--:|:--:|:--:|:--:|:--:|
    |1|`100`|`1`|?|?|?|`1???`|
    |2|`10`|`0`|`1`|?|?|`01??`|
    |3|`1`|`0`|`0`|`1`|?|`001?`|
    |4| |`1`|`0`|`0`|`1`|`1001`|
    |5| |?|`1`|`0`|`0`|`?100`|
    |6| |?|?|`1`|`0`|`??10`|
    |7| |?|?|?|`1`|`???1`|

    è¿™é‡Œçš„ SO æŒ‡çš„æ˜¯ä»å½“å‰è½®æ¬¡å¼€å§‹ï¼Œè¯»å…¥ 4bits æ•°æ®å¾—åˆ°çš„ä¸²è¡Œè¾“å‡ºç»“æœï¼Œè¿™é‡Œçš„ 4bits å½“ç„¶æ˜¯å¯¹åº”è¾“å…¥çš„ 4bitsã€‚

    å¯ä»¥å‘ç°ï¼Œåœ¨ç¬¬å››è½®å‰åçš„ç»“æœåˆ†åˆ«æ˜¯å·¦ç§»å’Œå³ç§»çš„ç»“æœï¼Œå½“ç„¶ï¼Œå¦‚æœæ˜¯è¦è€ƒè™‘å…·æœ‰å®é™…è®¡ç®—ä»·å€¼çš„ä½ç§»ï¼Œæˆ‘ä»¬å½“ç„¶éœ€è¦å¡«å…… `?` çš„å€¼ï¼Œä¸è¿‡è¿™éƒ½æ˜¯å°äº‹æƒ…ã€‚

---

#### å¹¶è¡ŒåŒ–

å¹¶è¡ŒåŒ–ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå³**å¹¶è¡Œè¾“å‡º(parallel output)**å’Œ**å¹¶è¡Œè½½å…¥(parallel load)**ï¼Œåˆ†åˆ«å¯¹åº”ç€ åœ¨åŒä¸€ä¸ªæ—¶é—´å‘¨æœŸå†…**å¾—åˆ°æ¯ä¸€ä¸ª `FF` çš„ç»“æœ**å’Œ**å¯¹æ¯ä¸€ä¸ª `FF` è½½å…¥æ•°æ®**ã€‚

å¹¶è¡Œè¾“å‡ºçš„å®ç°éå¸¸ç®€å•ï¼Œåªéœ€è¦ç»™æ¯ä¸€ä¸ª `FF` çš„è¾“å‡ºå¼•å‡ºä¸€æ¡çº¿å°±è¡Œäº†ï¼Œå®ƒä¸ä¸²è¡Œè¾“å‡ºå¯ä»¥ç›´æ¥åŒæ—¶å­˜åœ¨ï¼›è€Œå¹¶è¡Œè¾“å…¥åˆ™ä¸ä¸²è¡Œè¾“å…¥å†²çªï¼Œä¸€æ¬¡åªèƒ½å®ç°å…¶ä¸­ä¸€ä¸ªï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›æ§åˆ¶ç”µè·¯ï¼š

![](img/110.png)

> çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯å®é™…ä¸Šé€»è¾‘è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ã€‚
>
> - çºµå‘è§‚å¯Ÿå³ä¾§çš„å››ä¸ª `FF`ï¼Œå¯ä»¥å‘ç°åŸºæœ¬ä¸Šå°±æ˜¯ä¸²è¡Œä½ç§»å®ç°ï¼Œåªä¸è¿‡å…¶è¾“å…¥ä¸å†æ˜¯ç›´æ¥ä»ä¸Šä¸€ä¸ª `FF` é‚£è¾¹æ‹¿æ¥çš„ï¼›
> - å››ä¸ª `FF` çš„è¾“å…¥æ˜¯ç±»ä¼¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»…å…³æ³¨æœ€ä¸Šé¢çš„é‚£ä¸‰ä¸ªä¸é—¨å’Œä¸€ä¸ªæˆ–é—¨ï¼Œè¡¨ç¤ºæ•°æ®è¾“å…¥æœ‰ä¸‰ä¸ªå¯èƒ½çš„æ¥æºï¼›
>     1. ç¬¬ä¸€ä¸ªä¸é—¨ï¼Œ$F_i=Shift \cdot SI$ï¼ˆå¯¹äºåé¢å‡ ä¸ª `FF`ï¼Œåˆ™æ˜¯ $F_i=Shift \cdot FF_{i-1}$ï¼‰ï¼Œå¯ä»¥å‘ç°ï¼Œæ­¤æ—¶ç”µè·¯çš„è¡Œä¸ºä¸**ä¸²è¡Œä½ç§»å®ç°**ä¸€è‡´ï¼›
>         - å³ $Shift$ ä¸º `1` æ—¶ï¼Œ`SHR` è¡¨ç°ä¸ºã€Œ**æ¯ä¸ªå‘¨æœŸæ‰§è¡Œä¸€æ¬¡ä½ç§»**ã€ï¼›
>     2. ç¬¬äºŒä¸ªä¸é—¨ï¼Œ$F_i=\overline{Shift} \cdot Load \cdot D_i$ï¼Œæ­¤æ—¶ç”µè·¯çš„è¡Œä¸ºæ˜¯ä½¿ç”¨æ¯”ç‰¹å‘é‡å¯¹æ¯ä¸€ä¸ª `FF` èµ‹å€¼ï¼Œå³**å¹¶è¡Œè½½å…¥**ï¼›
>         - å³ $\overline{Shift} \cdot Load$ ä¸º `1` æ—¶ï¼Œ`SHR` è¡¨ç°ä¸ºã€Œ**å¹¶è¡Œè½½å…¥**ã€ï¼›
>     3. ç¬¬ä¸‰ä¸ªä¸é—¨ï¼Œ$F_i=\overline{Shift} \cdot \overline{Load} \cdot Q_i$ï¼Œæ­¤æ—¶ç”µè·¯çš„è¡Œä¸ºæ˜¯ä¿æŒä¸Šä¸€å‘¨æœŸçš„ç»“æœï¼›
>         - å³ $\overline{Shift} \cdot \overline{Load}$ ä¸º `1` æ—¶ï¼Œ`SHR` è¡¨ç°ä¸ºã€Œ**ä¿æŒ**ã€ï¼›
>
> æ€»å’Œæ¥è¯´ï¼Œå°±æ˜¯ï¼š
>
> $$
> \begin{aligned}
>       Shift :& Q\leftarrow \mathrm{sl}\; Q \\   
>       \overline{Shift}\cdot Load :& Q\leftarrow D \\   
>       \overline{Shift}\cdot \overline{Load} :& Q\leftarrow Q
> \end{aligned}
> $$
> 
> ![](img/111.png)

---

#### åŒå‘ä½ç§»å¯„å­˜å™¨

ä¸Šé¢ä»‹ç»çš„ä½ç§»å¯„å­˜å™¨éšç€æ—¶é’Ÿå‘¨æœŸçš„ä¾›ç»™ï¼Œåªèƒ½ä¸å¯é€†ã€å•å‘åœ°è¿›è¡Œä½ç§»ï¼Œè¿™ç§ä½ç§»å¯„å­˜å™¨ç§°ä¸º**æ— å‘ä½ç§»å¯„å­˜å™¨(Unidirectional SHR)**ï¼›å¯¹åº”çš„ï¼Œå¦‚æœèƒ½å¤Ÿæ”¯æŒå¯æ§åˆ¶çš„å·¦ç§»å³ç§»ï¼Œåˆ™è¢«ç§°ä¸º**åŒå‘ä½ç§»å¯„å­˜å™¨(Bidirectional SHR)**ã€‚

å…¶è¡Œä¸ºå¦‚ä¸‹ï¼š

$$
\begin{aligned}
    \overline{S_0} \cdot \overline{S_1} :& Q \leftarrow Q\\
    S_0 \cdot \overline{S_1} :& Q\leftarrow\mathrm{Sl}\; Q \\
    \overline{S_0} \cdot S_1 :& Q\leftarrow\mathrm{Sr}\; Q \\
    S_0 \cdot S_1:& Q\leftarrow D
\end{aligned}
$$

å…¶å•å…ƒå®ç°å¦‚ä¸‹ï¼š

![](img/112.png)

> å…¶æœ¬è´¨ä¸Šå°±æ˜¯æ·»åŠ äº†ä¸€ä¸ª `MUX` æ¥é€‰æ‹©ä¸‹ä¸€ä¸ªæ—¶é’Ÿæ˜¯ç»§æ‰¿ $(i+1)$ã€$(i-1)$ã€$D_i$ è¿˜æ˜¯ $Q$ã€‚

---

!!! note "ç»¼åˆé˜è¿°"
    ä»£ç æ„ä¹‰ä¸Šçš„ä½ç§»ä¸€èˆ¬æŒ‡çš„æ˜¯ä¸€ä¸ªåŒç›®æ“ä½œï¼Œå³å¯ä»¥æŒ‡å®šä½ç§»å¤šå°‘ä½ï¼Œè¿™ä¸ªå‚æ•°è¢«ç§°ä¸º**ä½ç§»é‡(Shift Amount)**ã€‚
    
    ä½†åœ¨ç¡¬ä»¶å±‚é¢çš„å®ç°ä¸Šï¼Œè¿™ä¸ªå¤šå°‘â€œä½â€åªèƒ½é€šè¿‡å¾ªç¯å’Œå·²ç»å®ç°çš„ã€**æœ‰é™ç§**ç¡®å®šä½ç§»é‡çš„ä½ç§»å®ç°ï¼Œåœ¨æˆ‘ä»¬æåˆ°çš„å®ç°ä¸­ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘ä»¬ç¡¬ä»¶åªå®ç°ã€Œä¸€ä½ä½ç§»ã€ï¼Œå¹¶é€šè¿‡å¾ªç¯å®ç°ã€Œä»»æ„ä½ä½ç§»ã€ï¼Œè€Œè¿™ä¸ªâ€œå¾ªç¯â€ï¼Œå°±æ˜¯åœ¨æ—¶é’Ÿå‘¨æœŸä¸‹ï¼Œ`FF` ä¸æ–­ç»§æ‰¿ä¸Šä¸€ä¸ª `FF` çš„å€¼æ¥å®ç°çš„ã€‚

    è€Œå¹¶è¡Œä¸ä¸²è¡Œå®ç°æ— éæ˜¯ä½“ç°è¿™ä¸ªç‰¹å¾çš„ä¸¤ç§å®ç°æ–¹æ³•è€Œå·²ã€‚

    ???- tip "å…³äºå¹¶è¡Œå’Œä¸²è¡Œ"
        è¿™æ˜¯ä¸€ä¸ªé¢˜å¤–è¯ï¼Œæˆ‘æš‚æ—¶ä¸çŸ¥é“æ”¾å“ªé‡Œï¼Œåˆšå¥½è¿™é‡Œæåˆ°äº†å°±åœ¨è¿™é‡Œè¯´äº†ã€‚

        å®é™…ä¸Šï¼Œè™½ç„¶çœ‹èµ·æ¥å¹¶è¡Œçš„æ•ˆç‡ä¼šæ¯”ä¸²è¡Œé«˜å¾ˆå¤šï¼Œä½†æ˜¯å®é™…ä¸Šå¾ˆå¤šé«˜é€Ÿä¼ è¾“è®¾å¤‡æˆ–åè®®ç”¨çš„éƒ½æ˜¯ä¸²è¡Œã€‚è¿™æ˜¯å› ä¸ºï¼Œå¹¶è¡Œå•æ¬¡ä¼ è¾“çº¿è·¯å¤šï¼Œçº¿è·¯ä¹‹é—´çš„è·ç¦»å°ï¼Œå¹²æ‰°å¤§ï¼Œæ‰€ä»¥ç›¸å¯¹æ¥è¯´æ­£å¸¸å·¥ä½œæ‰€ä¸‹å¯¹é¢‘ç‡çš„è¦æ±‚æ›´é«˜ï¼›è€Œä¸²è¡Œç”±äºå¯ä»¥ä½¿ç”¨æ›´é«˜çš„é¢‘ç‡å·¥ä½œï¼Œæ‰€ä»¥åœ¨æŸäº›æƒ…å†µä¸‹æ•ˆç‡æ›´é«˜ã€‚

---

## è®¡æ•°å™¨

è®¡æ•°å™¨(counter) æ˜¯ä»€ä¹ˆï¼Œå·²ç»åœ¨**[#å¯„å­˜å™¨](#å¯„å­˜å™¨)**ä¸­è§£é‡Šäº†ï¼Œæ ¹æ®å®ç°åŸç†ï¼Œä¸»è¦åˆ†ä¸º**è¡Œæ³¢è®¡æ•°å™¨(Ripple Counter)**å’Œ**åŒæ­¥è®¡æ•°å™¨(Synchronous Counter)**ä¸¤ç§ã€‚

---

### è¡Œæ³¢è®¡æ•°å™¨

è¡Œæ³¢è®¡æ•°å™¨çš„ä¸»è¦æ€æƒ³å°±æ˜¯å°†ä¸€ä¸ªä¸æ–­è‡ªåçš„ `FF` çš„è¾“å‡ºç›´æ¥æˆ–é—´æ¥ä½œä¸ºä¸‹ä¸€ä¸ª `FF` çš„æ—¶é’Ÿè„‰å†²ã€‚ç”±äºå½¢æˆä¸€æ¬¡è„‰å†²éœ€è¦ä¸€å¯¹ `0`&`1`ï¼Œæ‰€ä»¥å‰ä¸€ä¸ª `FF` å–åä¸¤æ¬¡æ‰èƒ½å¼•èµ·ä¸‹ä¸€ä¸ª `FF` å–åä¸€æ¬¡ï¼Œå¦‚æœä¸‹ä¸€ä¸ª `FF` æ˜¯åœ¨ä¸Šä¸€ä¸ª `FF` çš„è¾“å‡ºä» `1` å˜ `0` æ—¶è§¦å‘ï¼Œé‚£ä¸¤ä¸ª `FF` çš„å˜åŒ–åˆšå¥½å¯¹åº”äºäºŒè¿›åˆ¶è‡ªå¢çš„è¿›ä½è§„å¾‹ï¼š`(0,0)`ï¼Œ`(0,1)`ï¼Œ`(1,0)`ï¼Œ`(1,1)`ï¼Œ`0,0`ï¼Œ...

äºæ˜¯ï¼Œä¸€ä¸ª 4-Bit è¡Œæ³¢è®¡æ•°å™¨çš„é€»è¾‘å›¾å°±å¦‚ä¸‹ï¼š

![](img/113.png){ width=200px }
> - ä¸Šå›¾ä¸­ï¼Œä¸‹ä¸€ä¸ª `FF` çš„æ—¶é’Ÿæ¥è‡ªäºä¸Šä¸€ä¸ª `FF` çš„è¾“å‡ºå–åï¼Œä¹Ÿå°±æ˜¯å¯¹äºä¸Šå‡æ²¿è§¦å‘çš„ `FF` æ¥è¯´ï¼Œä¸‹ä¸€ä¸ª `FF` ä¼šåœ¨ä¸Šä¸€ä¸ª `FF` çš„è¾“å‡ºä» `1` åˆ° `0` æ—¶è‡ªåï¼Œæ‰€ä»¥æ˜¯**æ­£å‘è®¡æ—¶(Upward Counting)**ï¼›
> - åä¹‹ï¼Œå¦‚æœä¸‹ä¸€ä¸ª `FF` çš„æ—¶é’Ÿæ¥è‡ªäºä¸Šä¸€ä¸ª `FF` çš„ç›´æ¥è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯å¯¹äºä¸Šå‡æ²¿è§¦å‘çš„ `FF` æ¥è¯´ï¼Œä¸‹ä¸€ä¸ª `FF` ä¼šåœ¨ä¸Šä¸€ä¸ª `FF` çš„è¾“å‡ºä» `0` åˆ° `1` æ—¶è‡ªåï¼Œæ‰€ä»¥æ˜¯**é€†å‘è¾“å‡º(Downward Counting)**ï¼›

![](img/114.png)

å¯ä»¥å‘ç°ï¼Œè¡Œæ³¢è®¡æ•°å™¨çš„ä¼˜ç‚¹æ˜¯ç”µè·¯ç®€å•ï¼Œæˆæœ¬ä½ï¼›ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ—¢ç„¶å®ƒä¸åŒæ­¥è®¡æ•°å™¨ç›¸åŒºåˆ†ï¼Œå°±è¯´æ˜å®ƒä¸æ˜¯åŒæ­¥ç”µè·¯ï¼Œæ¯ä¸€ä¸ª `FF` éƒ½ä¼šæœ‰ä¼ æ’­å»¶æ—¶ï¼Œéšç€è®¡æ•°èŒƒå›´å¢å¤§ï¼Œæ€»ä¼ æ’­å»¶æ—¶ä¹Ÿä¼šå¢åŠ ï¼Œè€Œä¸ºäº†è®©ç”µè·¯æ­£å¸¸å·¥ä½œï¼Œæ—¶é’Ÿé¢‘ç‡ä¹Ÿè¦å› æ­¤ä¸‹é™ã€‚

ç”±äºè¿™äº›ï¼Œä¹¦ä¸Šå¯¹è¡Œæ³¢è®¡æ•°å™¨çš„è¯„ä»·æ˜¯å¤šæ•°æƒ…å†µä¸‹è¡Œæ³¢åŠ æ³•å™¨åªä¼šåœ¨ä½åŠŸè€—ç”µè·¯ä¸­è¢«é‡‡ç”¨ã€‚

---

### åŒæ­¥è®¡æ•°å™¨

åŒæ­¥è®¡æ•°å™¨ä»å®ç°è‡ªå¢çš„åŸç†ä¸Šæ¥è¯´ï¼Œå’Œè¡Œæ³¢è®¡æ•°å™¨ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼ŒåŒæ ·æ˜¯åœ¨ä¸Šä¸€ä¸ª `FF` å®Œæˆä¸€æ¬¡ç¿»è½¬çš„æ—¶å€™è®©ä¸‹ä¸€ä¸ª `FF` å˜åŒ–ã€‚åªä¸è¿‡åŒæ­¥è®¡æ•°å™¨ä¸æ˜¯æ§åˆ¶æ—¶é’Ÿï¼Œè€Œæ˜¯æ§åˆ¶ã€Œ`FF` å†…çš„å€¼æ˜¯å¦å–åã€æ¥å®ç°ï¼Œè€Œå®ƒæ˜¯é€šè¿‡å¼‚æˆ–é—¨æ¥å®ç°çš„ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œ$0 \;\mathrm{XOR}\; X = X$ï¼Œè€Œ $1 \;\mathrm{XOR}\; X = \overline{X}$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ `XOR` çš„æŸä¸ªè¾“å…¥æ˜¯ `0` è¿˜æ˜¯ `1` æ¥å®ç°å–åè¿˜æ˜¯ä¿æŒçš„åˆ‡æ¢ã€‚

> ä¸è¿‡éœ€è¦åŒºåˆ†çš„æ˜¯ï¼Œè¡Œæ³¢è®¡æ•°å™¨æ˜¯åœ¨ä¸Šä¸€ä¸ª `FF` å˜åŒ–å®Œæ‰å½±å“ä¸‹ä¸€ä¸ªçš„ï¼Œæ‰€ä»¥æ˜¯ `1` å˜ `0` æ—¶éœ€è¦è¿›ä½ï¼›è€ŒåŒæ­¥è®¡æ•°å™¨çš„æ‰€æœ‰ `FF` æ˜¯ä¸€èµ·å˜åŒ–çš„ï¼Œæ‰€ä»¥åªæœ‰åœ¨å‰é¢éƒ½æ˜¯ `1` æ—¶å€™ï¼Œè¡¨ç¤ºä¸‹ä¸€åˆ»å®ƒä»¬éƒ½è¦è¿›ä½äº†ï¼Œå½“å‰ `FF` æ‰è¿›ä½ã€‚
>
> ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡Œæ³¢è®¡æ•°å™¨æ˜¯å»ºç«‹åœ¨å‰ä¸€ä¸ª `FF` çš„ç»“æœè¿›è¡Œå˜åŒ–ï¼›è€Œå¹¶è¡ŒåŠ æ³•å™¨æ˜¯å»ºç«‹åœ¨ä¸Šä¸€åˆ»æ‰€æœ‰å…³è” `FF` çš„çŠ¶æ€ï¼Œå¯¹ä¸‹ä¸€çŠ¶æ€çš„é¢„åˆ¤ã€‚

åœ¨è¿™åŸºç¡€ä¸Šï¼ŒåŒæ­¥è®¡æ•°å™¨çš„**è‡ªå¢å™¨(incrementer)**æœ‰ä¸¤ç§ä¸åŒçš„å®ç°æ–¹æ³•ï¼š

![](img/115.png)
> (b) çš„è“è‰²éƒ¨åˆ†æ›¿æ¢ (a) çš„è“æ¡†éƒ¨åˆ†ä¸ºç¬¬äºŒç§ã€‚ä¸¤ç§åˆ†åˆ«ä¸º é—¨ä¸²è¡Œå®ç° å’Œ é—¨å¹¶è¡Œå®ç°ã€‚
>
> ä¸¤ç§å®ç°å…¶å®åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡é—¨ä¸²è¡Œç‰ºç‰²æŸäº›æƒ…å†µä¸‹çš„è¿è¡Œæ•ˆç‡ï¼ŒèŠ‚çº¦äº†é—¨æˆæœ¬ï¼›è€Œé—¨å¹¶è¡Œæé«˜xäº†é—¨æˆæœ¬ï¼Œå‡å°‘äº†æŸäº›æƒ…å†µä¸‹çš„é—¨å»¶è¿Ÿã€‚

å½“ç„¶ï¼Œæ—¢ç„¶ä½¿ç”¨çš„æ˜¯è‡ªå¢å™¨ï¼Œé‚£ä¹ˆå®ç°çš„è‡ªç„¶å°±æ˜¯æ­£å‘è®¡æ•°å™¨ã€‚ä¸ºäº†å®ç°é€†å‘è®¡æ•°å™¨ï¼Œæˆ‘ä»¬åˆ™éœ€è¦å°†è‡ªå¢å™¨æ¢ä¸ºè‡ªå‡å™¨ã€‚åšæ³•åªä¸è¿‡æ˜¯å°†å¼‚æˆ–é—¨çš„æ§åˆ¶ä¿¡å·å–åã€‚

å…·ä½“æ¥è¯´ï¼Œè¾“å…¥å‡½æ•°å˜ä¸ºï¼š

$$
\begin{aligned}
    D_{A0} = & Q_0 \oplus EN \\
    D_{A1} = & Q_1 \oplus \left(
        (Q_0 \cdot \overline{S} + \overline{Q_0} \cdot S) \cdot EN
    \right) \\
    D_{A2} = & Q_2 \oplus \left(
        (Q_0 \cdot Q_1 \cdot \overline{S} + \overline{Q_0} \cdot \overline{Q_1} \cdot S) \cdot EN
    \right) \\
    D_{A3} = & Q_3 \oplus \left(
        (Q_0 \cdot Q_1 \cdot Q_2 \cdot \overline{S} + \overline{Q_0} \cdot \overline{Q_1} \cdot \overline{Q_2} \cdot S) \cdot EN
    \right)
\end{aligned}
$$

> ä»è¿™ä¸ªè¡¨è¾¾å¼ä¹Ÿå¯ä»¥ç•¥å¾®æ„Ÿå—åˆ°é—¨ä¸²è¡Œå’Œé—¨å¹¶è¡Œçš„åŒºåˆ«ç©¶ç«Ÿåœ¨å“ªé‡Œï¼Œå®ƒä»¬ä½¿ç”¨åŒä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåªä¸è¿‡ç”¨ä¸åŒçš„æ–¹å¼æ¥å®ç°å¤šä½ `AND` è¿ç®—ã€‚

---

#### åŒæ­¥è½½å…¥

è¿™é‡ŒåŒæ­¥è½½å…¥çš„å«ä¹‰å¯ä»¥åŒ**[ä½ç§»å¯„å­˜å™¨çš„å¹¶è¡Œè½½å…¥](#å¹¶è¡ŒåŒ–)**ç±»æ¯”ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯å°†è®¡æ•°å™¨çš„å½“å‰å€¼è®¾ä¸ºä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„æ•°å­—ã€‚

ä»¥é—¨ä¸²è¡Œå®ç°ä¸ºä¾‹ï¼Œæ·»åŠ åŠŸèƒ½æ§åˆ¶é€»è¾‘åçš„è®¾è®¡å¦‚ä¸‹ï¼š

![](img/116.png)

---

### ä»»æ„è®¡æ•°åºåˆ—

ç°åœ¨è®©æˆ‘ä»¬å›å½’è®¡æ•°å™¨çš„è¡Œä¸ºï¼š<u>éšç€æ—¶é’Ÿå‘¨æœŸä¸æ–­åœ¨å›ºå®šçš„çŠ¶æ€åºåˆ—ä¸­å¾ªç¯</u>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªåºåˆ—æœªå¿…éœ€è¦æ˜¯æ•´æ•°è‡ªå¢è‡ªå‡åºåˆ—ã€‚è€Œå®ç°æŸä¸€åºåˆ—çš„è®¡æ•°è¡Œä¸ºï¼Œå®é™…ä¸Šåªè¦è®¾è®¡å¥½æœ‰é™çŠ¶æ€å’ŒçŠ¶æ€ä¹‹é—´çš„è½¬ç§»å³å¯ã€‚

å½“ç„¶ï¼Œè¿™ä¸ªè¯é¢˜å¤ªè¿‡å®½æ³›ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå…·ä½“è®¨è®ºçš„è¿˜æ˜¯æ•´æ•°è‡ªå¢åºåˆ—ï¼Œåªä¸è¿‡é™åˆ¶äº†ä¸Šä¸‹ç•Œã€‚ä¹¦ä¸Šæä¾›çš„æ¡ˆä¾‹æ˜¯ BCD ç çš„å¾ªç¯è®¡æ•°ï¼Œé‚£æˆ‘ä»¬ä¹Ÿè·Ÿç€è¿™ä¸ªæ¡ˆä¾‹æ¥ã€‚

---

#### BCD ç å¾ªç¯è®¡æ•°

é¦–å…ˆæˆ‘ä»¬éœ€è¦æ ¹æ®æ—¶åºç”µè·¯çš„è®¾è®¡è§„åˆ™ï¼Œææ¸…æ¥šçŠ¶æ€åºåˆ—ï¼Œæ˜¾ç„¶ï¼Œæ ¹æ® BCD ç çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¯›æ¯›åœ°è®¤ä¸ºå®ƒæ˜¯ä¸‹ç¡®ç•Œä¸º `0`ï¼Œä¸Šç¡®ç•Œä¸º `9` çš„ 4 æ¯”ç‰¹æ•´æ•°åºåˆ—ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè®¡æ•°åˆ° `9` åä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ `0` çš„ 4 æ¯”ç‰¹è®¡æ•°å™¨ã€‚

äºæ˜¯æˆ‘ä»¬å¯ä»¥å½“è®¡æ•°å™¨çš„è¾“å‡ºä¸º `9` æ—¶ï¼Œä¸‹ä¸€å‘¨æœŸè®©è®¡æ•°å™¨è½½å…¥ `0`ï¼š

![](img/117.png)
> æŒ‰ç†æ¥è¯´è¿™é‡Œåº”è¯¥æ˜¯ $Load = Q_0\cdot\overline{Q_1}\cdot\overline{Q_2}\cdot Q_3$ï¼Œä»¥å¯¹åº” `9D=1001B`ï¼Œä½†æ˜¯ç”±äºè‡ªå¢è¿‡ç¨‹ä¸­ï¼Œ`1001` æ˜¯ç¬¬ä¸€ä¸ªæ»¡è¶³ `1??1` çš„ç»„åˆï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç®€åŒ–ä¸º $Load = Q_0\cdot Q_3$ã€‚

å¦‚ä¸Šæ˜¯ä¿®æ”¹ä¸Šç¡®ç•Œçš„æ–¹æ³•ï¼Œè€Œä¿®æ”¹ä¸‹ç¡®ç•Œçš„æ–¹æ³•åˆ™æ˜¯ä¿®æ”¹ $D_i$ åºåˆ—ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­ $D$ æ¥åœ°ï¼Œæ‰€ä»¥ä¸‹ç¡®ç•Œæ˜¯ `0000B`ã€‚

!!! eg "Mod N è®¡æ•°å™¨"
    å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ BCD ç å¾ªç¯è®¡æ•°å™¨çœ‹ä½œæ˜¯ç‰¹æ®Šçš„ Mod N è®¡æ•°å™¨ï¼Œå³ N = 10 çš„ Mod N è®¡æ•°å™¨ã€‚

    æˆ–è®¸ä½ ä¼šæƒ³ï¼Œå®ç° Mod N è®¡æ•°å™¨èƒ½ä¸èƒ½åœ¨æ»¡è¶³è¾“å‡ºæ¡ä»¶åç›´æ¥ä½¿ç”¨ `Clear` è¾“å…¥ã€‚ä½†æ˜¯è¯·ä¸è¦å¿˜è®°äº†ï¼Œ`Clear` ä¹Ÿå¥½ï¼Œ`Set` ä¹Ÿç½¢ï¼Œå®ƒä»¬éƒ½æ˜¯å¼‚æ­¥æ“ä½œã€‚æˆ‘ä»¬æ²¡æœ‰å¿…è¦ä¹Ÿä¸åº”è¯¥ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥æœ€å¥½çš„åšæ³•è¿˜æ˜¯ä½¿ç”¨ `Load`ã€‚

---

## å¯„å­˜å™¨ä¼ è¾“çš„æ§åˆ¶

!!! error "æœªå®Œæˆ"

Control Unit

- Programmable sys
    - instructions (usually stored in memory RAM/ROM)
    - program counter
- Nonprogrammable sys
    - focus on this
    - State machine diagrams for Control Unit design.

1. Write a detailed system specification.
2. Define all external data and control input signals, all external data, control, and status output signals, and the registers of the datapath and control unit.
3. Find a state machine diagram for the system including the register transfers in the datapath and in the control unit.
4. Define internal control and status signals. Use these signals to separate output conditions and actions, including register transfers, from the state diagram flow and represent them in tabular form.
5. Draw a block diagram of the datapath including all control and status inputs and outputs. Draw a block diagram of the control unit if it includes register transfer hardware.
6. Design any specialized register transfer logic in both the control and datapath.
7. Design the control unit logic.
8. Verify the correct operation of the combined datapath and control logic. If verification fails, debug the system and reverify it.

é‡ç‚¹çœ‹ä¹¦ä¸Šçš„ä¾‹å­ã€‚







